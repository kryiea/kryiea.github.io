import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,e as i,o as p}from"./app-DRR9Yo7Y.js";const o="/assets/%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95-LRU.001-B4WFd0C-.png",n="/assets/%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95-LRU.002-DfEdDkOA.png",l={};function s(a,e){return p(),r("div",null,e[0]||(e[0]=[i('<p><strong>å†…å­˜æ·˜æ±°ç®—æ³•-LRU</strong></p><p><strong>æ ‡å‡† LRU</strong></p><p>LRU æ˜¯ä¸€ä¸ªæµè¡Œçš„èµ„æºæ·˜æ±°ç®—æ³•</p><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ï¼Œå³è®°å½•æ¯ä¸ª key çš„æœ€è¿‘è®¿é—®æ—¶é—´ï¼Œç»´æŠ¤ä¸€ä¸ªè®¿é—®æ—¶é—´æ•°æ®</p><p><strong>redis ä½¿ç”¨æ ‡å‡†çš„ LRU ä¼šæœ‰ä»€ä¹ˆé—®é¢˜</strong></p><p>ä¸ºæ‰€æœ‰æ•°æ®ç»´æŠ¤ä¸€ä¸ªé¡ºåºåˆ—è¡¨ï¼Œå®é™…å°±æ˜¯åšä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¦‚æœ redis æ•°æ®ç¨å¾®å¤šäº›ï¼Œè¿™ä¸ªé“¾è¡¨å°±æˆæœ¬å°±å¾ˆå¤§</p><p><strong>redis çš„è¿‘ä¼¼ LRU</strong></p><p><a href="https://juejin.cn/post/6844903454708596750" target="_blank" rel="noopener noreferrer">Redis è¿‘ä¼¼ LRU ç®—æ³•ä¼˜åŒ– - æ˜é‡‘</a></p><p><strong>æ¦‚è¿°</strong></p><ul><li>åœ¨ LRU æ¨¡å¼ä¸­ï¼ŒredisObject å¯¹è±¡ä¸­ lru å­—æ®µå­˜å‚¨çš„æ˜¯ key è¢«è®¿é—®æ—¶ï¼Œredis çš„æ—¶é’Ÿ server.lrulock</li><li>å½“ key è¢«è®¿é—®æ—¶ï¼Œredis ä¼šæ›´æ–°è¿™ä¸ª key çš„ lru å­—æ®µ</li><li>ä½†æ˜¯ï¼Œredis ä¸ºäº†ä¿è¯æ ¸å¿ƒå•çº¿ç¨‹æœåŠ¡æ€§èƒ½ï¼Œç¼“å­˜äº† Unix æ“ä½œç³»ç»Ÿæ—¶é’Ÿï¼Œé»˜è®¤æ¯ 100ms æ›´æ–°ä¸€æ¬¡ï¼Œç¼“å­˜çš„å€¼æ—¶ Unix æ—¶é—´æˆ³å–æ¨¡ 2^24</li></ul><p>è¿‘ä¼¼ LRU</p><ul><li>è¿‘ä¼¼ lru ç®—æ³•åœ¨ç°æœ‰çš„æ•°æ®ç»“æ„åŸºç¡€ä¸Šé‡‡ç”¨éšæœºå–æ ·çš„æ–¹å¼æ¥æ·˜æ±°å…ƒç´ ï¼Œå½“å†…å­˜ä¸è¶³ï¼Œå°±æ‰§è¡Œä¸€æ¬¡è¿‘ä¼¼ lru</li><li>å…·ä½“æ­¥éª¤ï¼š</li><li>éšæœºé‡‡ç”¨ n ä¸ª keyï¼Œé»˜è®¤ 5 ä¸ª</li><li>æ ¹æ®æ—¶é—´æˆ³æ·˜æ±°æ‰æœ€æ—§çš„ key</li><li>æ·˜æ±°åè¿˜æ˜¯å†…å­˜ä¸è¶³ï¼Œç»§ç»­é‡‡æ ·æ·˜æ±°</li></ul><p><strong>é‡‡æ ·èŒƒå›´</strong></p><ol><li>allkeysï¼šä»æ‰€æœ‰ key ä¸­éšæœºé‡‡æ ·</li><li>volatileï¼šä»æœ‰è¿‡æœŸæ—¶é—´çš„ key éšæœºé‡‡æ ·</li></ol><p>å¯¹åº”ï¼šallkeys-lru å’Œ volatile-lru</p><p><strong>æ·˜æ±°æ± ä¼˜åŒ–</strong></p><p>è¿‘ä¼¼ lru çš„ä¸€äº›é—®é¢˜</p><p>è¿‘ä¼¼ lru ä¼˜ç‚¹åœ¨äºèŠ‚çº¦äº†å†…å­˜ï¼Œä½†ç¼ºç‚¹å°±æ˜¯å®ƒä¸æ˜¯ä¸€å®Œæ•´çš„ lruï¼Œéšæœºé‡‡æ ·å¾—åˆ°çš„ç»“æœï¼Œå…¶å®ä¸æ˜¯å…¨å±€çœŸæ­£çš„æœ€ä¹…æœªè®¿é—®ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™æ›´åŠ </p><p>redis3.0 å¯¹è¿‘ä¼¼ lru è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–</p><ol><li>æ–°ç®—æ³•ä¼šç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º 16 ï¼ˆä¸æ˜¯å›ºå®šçš„ï¼Œä¼šåŠ¨æ€è°ƒæ•´ï¼‰çš„å€™é€‰æ± ï¼Œæ± ä¸­çš„æ•°æ®æ ¹æ®ç©ºé—²æ—¶é—´é•¿çŸ­è¿›è¡Œæ’åº</li><li>ç¬¬ä¸€æ¬¡éšæœºé€‰å–çš„ key éƒ½ä¼šæ”¾å…¥æ± ä¸­ï¼Œç„¶åæ·˜æ±°æœ€ä¹…æœªè®¿é—®çš„ã€‚ æ¯”å¦‚é€‰äº† 5 ä¸ªï¼Œæ·˜æ±° 1 ä¸ªï¼Œæ± å­è¿˜å‰© 4 ä¸ª</li><li>éšåæ¯æ¬¡éšæœºé€‰å–çš„ keyï¼Œåªæœ‰æ´»æ€§æ¯”æ± å­é‡Œæ´»æ€§æœ€å°çš„ key è¿˜å°æ—¶ï¼Œæ‰ä¼šæ”¾å…¥æ± ä¸­</li><li>æ± å­æ»¡äº†ä¹‹åæ¯æ¬¡æ”¾ä¸€ä¸ª key è¿›ï¼Œæ»¡ä¹‹å‰ç¬¦åˆçš„éƒ½æ”¾è¿›</li><li>å½“æ± å­æ»¡äº†ï¼Œå¦‚æœæœ‰æ–°çš„ key éœ€è¦æ”¾å…¥ï¼Œå°±ä¼šå°†æ± å­ä¸­æ´»æ€§æœ€ä½ï¼ˆè¿™é‡Œçš„æ´»æ€§ä½å°±æ˜¯ç©ºé—²æ—¶é—´é•¿ï¼‰çš„ key æ·˜æ±°</li><li>æ–°çš„ key è¦æ”¾å…¥çš„æ„æ€ï¼šéšæœºé€‰å–çš„ n ä¸ªé‡‡æ ·é‡Œé¢æ´»æ€§æœ€ä½çš„ä¸æ± ä¸­æ´»æ€§æœ€ä½çš„æ¯”è¾ƒï¼Œè°æ›´ä½è°è¢«æ·˜æ±°ï¼Œæ²¡è¢«æ·˜æ±°çš„æ”¾å…¥æ± å­</li></ol><figure><img src="'+o+'" alt="..." tabindex="0" loading="lazy"><figcaption>...</figcaption></figure><p>ç©ºé—²æ—¶é—´çš„è®¡ç®—</p><p>idle = object.lru - server.lrulock</p><p>æ·˜æ±°æ± çš„ç»“æ„</p><p>Redisçš„æ·˜æ±°æ± æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼Œè€Œä¸æ˜¯é“¾è¡¨ã€‚</p><p>å­—å…¸ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯ç›¸é‚»èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p><p>å› æ­¤ï¼Œåœ¨éå†æ·˜æ±°æ± æ—¶ï¼ŒRediséœ€è¦ä½¿ç”¨å“ˆå¸Œè¡¨ç®—æ³•æ¥æŸ¥æ‰¾å¤§äºå½“å‰æœ€å¤§å¯ç”¨å†…å­˜çš„é”®ã€‚</p><figure><img src="'+n+'" alt="..." tabindex="0" loading="lazy"><figcaption>...</figcaption></figure>',29)]))}const g=t(l,[["render",s],["__file","å†…å­˜æ·˜æ±°ç®—æ³•-LRU.html.vue"]]),m=JSON.parse('{"path":"/back-end/redis/Operating-principle/%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95-LRU.html","title":"Redis LRUå†…å­˜æ·˜æ±°ç®—æ³•è¯¦è§£","lang":"zh-CN","frontmatter":{"title":"Redis LRUå†…å­˜æ·˜æ±°ç®—æ³•è¯¦è§£","description":"æ·±å…¥åˆ†æRedis LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•çš„å®ç°åŸç†åŠåº”ç”¨","date":"2024-01-01T00:00:00.000Z","category":["æ•°æ®åº“","Redis"],"tag":["Redis","LRU","å†…å­˜æ·˜æ±°","ç®—æ³•åŸç†"],"head":[["meta",{"property":"og:url","content":"https://kryiea.cn/back-end/redis/Operating-principle/%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95-LRU.html"}],["meta",{"property":"og:site_name","content":"ğŸ§kryiea"}],["meta",{"property":"og:title","content":"Redis LRUå†…å­˜æ·˜æ±°ç®—æ³•è¯¦è§£"}],["meta",{"property":"og:description","content":"æ·±å…¥åˆ†æRedis LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•çš„å®ç°åŸç†åŠåº”ç”¨"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-31T15:53:39.000Z"}],["meta",{"property":"article:tag","content":"Redis"}],["meta",{"property":"article:tag","content":"LRU"}],["meta",{"property":"article:tag","content":"å†…å­˜æ·˜æ±°"}],["meta",{"property":"article:tag","content":"ç®—æ³•åŸç†"}],["meta",{"property":"article:published_time","content":"2024-01-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-31T15:53:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis LRUå†…å­˜æ·˜æ±°ç®—æ³•è¯¦è§£\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-01-01T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-31T15:53:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"kryiea\\",\\"url\\":\\"https://github.com/kryiea\\",\\"email\\":\\"kryieaa@outlook.com\\"}]}"]]},"headers":[],"git":{"createdTime":1743436419000,"updatedTime":1743436419000,"contributors":[{"name":"kryiea","email":"1582877056@qq.com","commits":1}]},"readingTime":{"minutes":2.77,"words":832},"filePathRelative":"back-end/redis/Operating-principle/å†…å­˜æ·˜æ±°ç®—æ³•-LRU.md","localizedDate":"2024å¹´1æœˆ1æ—¥","excerpt":"<p><strong>å†…å­˜æ·˜æ±°ç®—æ³•-LRU</strong></p>\\n<p><strong>æ ‡å‡† LRU</strong></p>\\n<p>LRU æ˜¯ä¸€ä¸ªæµè¡Œçš„èµ„æºæ·˜æ±°ç®—æ³•</p>\\n<p><strong>æ˜¯ä»€ä¹ˆ</strong></p>\\n<p>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ï¼Œå³è®°å½•æ¯ä¸ª key çš„æœ€è¿‘è®¿é—®æ—¶é—´ï¼Œç»´æŠ¤ä¸€ä¸ªè®¿é—®æ—¶é—´æ•°æ®</p>\\n<p><strong>redis ä½¿ç”¨æ ‡å‡†çš„ LRU ä¼šæœ‰ä»€ä¹ˆé—®é¢˜</strong></p>\\n<p>ä¸ºæ‰€æœ‰æ•°æ®ç»´æŠ¤ä¸€ä¸ªé¡ºåºåˆ—è¡¨ï¼Œå®é™…å°±æ˜¯åšä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¦‚æœ redis æ•°æ®ç¨å¾®å¤šäº›ï¼Œè¿™ä¸ªé“¾è¡¨å°±æˆæœ¬å°±å¾ˆå¤§</p>\\n<p><strong>redis çš„è¿‘ä¼¼ LRU</strong></p>"}');export{g as comp,m as data};
