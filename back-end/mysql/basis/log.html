<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://kryiea.cn/back-end/mysql/basis/log.html"><meta property="og:site_name" content="ğŸ§kryiea"><meta property="og:title" content="MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£"><meta property="og:description" content="ä»ç†è§£ SQL æ‰§è¡Œè¿‡ç¨‹åˆ°ç†è§£MySQL æ—¥å¿—ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹ã€‚"><meta property="og:type" content="article"><meta property="og:image" content="http://images.kryiea.cn/img/1717220312018.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-03-31T15:53:39.000Z"><meta property="article:tag" content="MySQL"><meta property="article:tag" content="æ•°æ®åº“æ—¥å¿—"><meta property="article:tag" content="binlog"><meta property="article:tag" content="redo log"><meta property="article:tag" content="undo log"><meta property="article:published_time" content="2024-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2025-03-31T15:53:39.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£","image":["http://images.kryiea.cn/img/1717220312018.jpg","http://images.kryiea.cn/img/20240601142819.png","http://images.kryiea.cn/img/1.png","http://images.kryiea.cn/img/20240601154137.png","http://images.kryiea.cn/img/mysql-BufferPool.drawio.png","http://images.kryiea.cn/img/mysql-4.drawio.png","http://images.kryiea.cn/img/mysql-1WAL.drawio.png","http://images.kryiea.cn/img/20240602172013.png","http://images.kryiea.cn/img/20240602173429.png","http://images.kryiea.cn/img/20240603001559.png","http://images.kryiea.cn/img/20240603002541.png","http://images.kryiea.cn/img/20240603005031.png","http://images.kryiea.cn/img/20240603010701.png"],"datePublished":"2024-01-01T00:00:00.000Z","dateModified":"2025-03-31T15:53:39.000Z","author":[{"@type":"Person","name":"kryiea","url":"https://github.com/kryiea","email":"kryieaa@outlook.com"}]}</script><title>MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£ | ğŸ§kryiea</title><meta name="description" content="ä»ç†è§£ SQL æ‰§è¡Œè¿‡ç¨‹åˆ°ç†è§£MySQL æ—¥å¿—ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹ã€‚">
    <link rel="preload" href="/assets/style-CT-7IuSv.css" as="style"><link rel="stylesheet" href="/assets/style-CT-7IuSv.css">
    <link rel="modulepreload" href="/assets/app-DRR9Yo7Y.js"><link rel="modulepreload" href="/assets/log.html-vs8MoPOL.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-BPxQ0yma.js" as="script"><link rel="prefetch" href="/assets/intro.html-BkOIZxpG.js" as="script"><link rel="prefetch" href="/assets/index.html-CizTAqjX.js" as="script"><link rel="prefetch" href="/assets/vscode.html-D_6pJweg.js" as="script"><link rel="prefetch" href="/assets/index.html-99kMvy-i.js" as="script"><link rel="prefetch" href="/assets/index.html-CERxvZuw.js" as="script"><link rel="prefetch" href="/assets/æµ·é‡æ•°æ®å¤„ç†.html-DTIg5tlf.js" as="script"><link rel="prefetch" href="/assets/é˜²é‡è®¾è®¡ä¸æ¥å£å¹‚ç­‰è®¾è®¡.html-kjB1KY1x.js" as="script"><link rel="prefetch" href="/assets/GCCã€GDB.html-BuEela3A.js" as="script"><link rel="prefetch" href="/assets/index.html-DWqHY0-c.js" as="script"><link rel="prefetch" href="/assets/c__ç‰¹æ€§.html-CnfmIHFk.js" as="script"><link rel="prefetch" href="/assets/åŸºç¡€å¤ä¹ .html-CprFerX_.js" as="script"><link rel="prefetch" href="/assets/é¢„ç¼–è¯‘.html-h6zyQ2HS.js" as="script"><link rel="prefetch" href="/assets/index.html-Cty9l1oa.js" as="script"><link rel="prefetch" href="/assets/äºŒåˆ†çº¢è“æŸ“è‰²æ³•.html-wyXLTiYH.js" as="script"><link rel="prefetch" href="/assets/äºŒå‰å †.html-CMDmvz7p.js" as="script"><link rel="prefetch" href="/assets/äºŒå‰æ ‘.html-DOvjq-f7.js" as="script"><link rel="prefetch" href="/assets/å“ˆå¸Œç®—æ³•.html-BWG_iyCD.js" as="script"><link rel="prefetch" href="/assets/æ»‘åŠ¨çª—å£.html-DRlQpr3J.js" as="script"><link rel="prefetch" href="/assets/index.html-BTskjSte.js" as="script"><link rel="prefetch" href="/assets/é›ªèŠ±ç®—æ³•.html-Bp3wePRA.js" as="script"><link rel="prefetch" href="/assets/FrameworkAndcore.html-CG_iO0_G.js" as="script"><link rel="prefetch" href="/assets/index.html-CI7gnSFG.js" as="script"><link rel="prefetch" href="/assets/commands.html-CVvWiJyI.js" as="script"><link rel="prefetch" href="/assets/index.html-D52przz6.js" as="script"><link rel="prefetch" href="/assets/index.html-B1rAFsqJ.js" as="script"><link rel="prefetch" href="/assets/Kafkaæ¶æ„.html-CDMq17c3.js" as="script"><link rel="prefetch" href="/assets/Kafkaé«˜å¯ç”¨.html-DUpsLa2f.js" as="script"><link rel="prefetch" href="/assets/index.html-BQLV-3fH.js" as="script"><link rel="prefetch" href="/assets/index.html-y7EcmQFf.js" as="script"><link rel="prefetch" href="/assets/Shellç”¨æˆ·å’Œç»„.html-BSU4ztOH.js" as="script"><link rel="prefetch" href="/assets/linuxå‘½ä»¤.html-BpJCNzMo.js" as="script"><link rel="prefetch" href="/assets/vimå‘½ä»¤.html-D81Xkcqw.js" as="script"><link rel="prefetch" href="/assets/å†…å­˜ç®¡ç†.html-CyWBB7pd.js" as="script"><link rel="prefetch" href="/assets/å†…æ ¸æ€ä¸ç”¨æˆ·æ€.html-B1-9TBy9.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶ç³»ç»Ÿ.html-B_9ibgF6.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œç¼–ç¨‹.html-C_zQgMIj.js" as="script"><link rel="prefetch" href="/assets/Protobuf.html-Cg4se1RV.js" as="script"><link rel="prefetch" href="/assets/index.html-B0iV1Ikj.js" as="script"><link rel="prefetch" href="/assets/index.html-jaz4nmp0.js" as="script"><link rel="prefetch" href="/assets/index.html-BBWsUZ4w.js" as="script"><link rel="prefetch" href="/assets/ä¼ è¾“å±‚.html-BtArg8lF.js" as="script"><link rel="prefetch" href="/assets/åº”ç”¨å±‚.html-B-0F8CIz.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œå®‰å…¨.html-Y1M7J0bY.js" as="script"><link rel="prefetch" href="/assets/è™šæ‹Ÿæœºç½‘ç»œæ¨¡å¼.html-DNWNAzVq.js" as="script"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œè¯­é›€å¯¼å…¥.html-DEdFLyRm.js" as="script"><link rel="prefetch" href="/assets/index.html-Uv8XNCCa.js" as="script"><link rel="prefetch" href="/assets/channel.html-Cg6U0gdr.js" as="script"><link rel="prefetch" href="/assets/context.html-DCLvPDFd.js" as="script"><link rel="prefetch" href="/assets/defer.html-CUR1Gk6X.js" as="script"><link rel="prefetch" href="/assets/interface.html-Bglaa7DW.js" as="script"><link rel="prefetch" href="/assets/map.html-Dkx-1_Lp.js" as="script"><link rel="prefetch" href="/assets/slice.html-FWEhCRlu.js" as="script"><link rel="prefetch" href="/assets/string.html-B7wt-K9Z.js" as="script"><link rel="prefetch" href="/assets/demoToGmp.html-CXN6wS-c.js" as="script"><link rel="prefetch" href="/assets/gmp.html-DwLOd-xr.js" as="script"><link rel="prefetch" href="/assets/Compiler.html-CM0c_tir.js" as="script"><link rel="prefetch" href="/assets/memoryEscape.html-DZe821ye.js" as="script"><link rel="prefetch" href="/assets/multiReturns.html-D7hxm1L7.js" as="script"><link rel="prefetch" href="/assets/GrammarBasics.html-D1itCc1c.js" as="script"><link rel="prefetch" href="/assets/jsonPackage.html-BMzcoG8T.js" as="script"><link rel="prefetch" href="/assets/strings.html-DPWNxvxR.js" as="script"><link rel="prefetch" href="/assets/syncmap.html-Dozt2UoP.js" as="script"><link rel="prefetch" href="/assets/Exception.html-CxK7nUk8.js" as="script"><link rel="prefetch" href="/assets/Reflection.html-DRS0gA5V.js" as="script"><link rel="prefetch" href="/assets/JavaBasics.html-D9wfp-Hd.js" as="script"><link rel="prefetch" href="/assets/Filter.html-CdjuSYBE.js" as="script"><link rel="prefetch" href="/assets/Listener.html-dycBYDJm.js" as="script"><link rel="prefetch" href="/assets/Servlet.html-CFshrBkv.js" as="script"><link rel="prefetch" href="/assets/Spring.html-D7NC1e_x.js" as="script"><link rel="prefetch" href="/assets/kafka-practice.html-sKxUtD4A.js" as="script"><link rel="prefetch" href="/assets/åˆ†åº“åˆ†è¡¨.html-C_WQcb3d.js" as="script"><link rel="prefetch" href="/assets/è¯»å†™åˆ†ç¦»ã€ä¸»ä»åŒæ­¥.html-DMZC3rJk.js" as="script"><link rel="prefetch" href="/assets/InnoDBå­˜å‚¨å¼•æ“.html-BvpPzMsq.js" as="script"><link rel="prefetch" href="/assets/äº‹åŠ¡.html-CRLH0DA7.js" as="script"><link rel="prefetch" href="/assets/åŸç†åˆ†ç±».html-BtbRZgyB.js" as="script"><link rel="prefetch" href="/assets/æ€§èƒ½è°ƒä¼˜.html-BUNmR4LB.js" as="script"><link rel="prefetch" href="/assets/æ—¥å¿—.html-B8sZ0tr_.js" as="script"><link rel="prefetch" href="/assets/ç´¢å¼•.html-DxAAvY_U.js" as="script"><link rel="prefetch" href="/assets/é€»è¾‘æ¶æ„.html-Lk3m6bXp.js" as="script"><link rel="prefetch" href="/assets/é”.html-D3ptGFhe.js" as="script"><link rel="prefetch" href="/assets/sqlæ‰§è¡Œé¡ºåº.html-BMK1-tj9.js" as="script"><link rel="prefetch" href="/assets/sqlç´¢å¼•.html-CqdS8YpK.js" as="script"><link rel="prefetch" href="/assets/sqlè¯­æ³•.html-CCGjdJ4H.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®åº“ç®¡ç†.html-uBTSWdaw.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®ç±»å‹.html-CyjxhIqu.js" as="script"><link rel="prefetch" href="/assets/hash.html-wDK9QkS-.js" as="script"><link rel="prefetch" href="/assets/hashtableåº•å±‚ç»“æ„.html-ChBwLb_n.js" as="script"><link rel="prefetch" href="/assets/list.html-BSbbZyhe.js" as="script"><link rel="prefetch" href="/assets/set.html-CxVqktGS.js" as="script"><link rel="prefetch" href="/assets/string.html-4VrRijFB.js" as="script"><link rel="prefetch" href="/assets/zset.html-D8FikSYR.js" as="script"><link rel="prefetch" href="/assets/å‹ç¼©åˆ—è¡¨.html-BN6vIpaZ.js" as="script"><link rel="prefetch" href="/assets/å¯¹è±¡è¿‡æœŸæ—¶é—´.html-BAeV_A3Y.js" as="script"><link rel="prefetch" href="/assets/è·³è¡¨.html-CNA2kpEH.js" as="script"><link rel="prefetch" href="/assets/rediså•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«.html-DIGvHMeK.js" as="script"><link rel="prefetch" href="/assets/rediså•çº¿ç¨‹è¿˜æ˜¯å¤šçº¿ç¨‹.html-DyruhYZ_.js" as="script"><link rel="prefetch" href="/assets/redisåœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜å‚¨çš„.html-C7olDoud.js" as="script"><link rel="prefetch" href="/assets/rediså¤šçº¿ç¨‹æ˜¯æ€ä¹ˆå›äº‹ï¼ˆæœªå®Œæˆï¼‰.html-B3ldJlci.js" as="script"><link rel="prefetch" href="/assets/redisèƒ½å­˜å¤šå°‘æ•°æ®.html-Dc8WVMa0.js" as="script"><link rel="prefetch" href="/assets/å†…å­˜æ·˜æ±°ç®—æ³•-LFU.html-SAZnyMMA.js" as="script"><link rel="prefetch" href="/assets/å†…å­˜æ·˜æ±°ç®—æ³•-LRU.html-BPc2dvZy.js" as="script"><link rel="prefetch" href="/assets/lock.html-BZsrY6gi.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼é”.html-PsF-EdpD.js" as="script"><link rel="prefetch" href="/assets/æ¶ˆæ¯é˜Ÿåˆ—.html-DeqkDaUP.js" as="script"><link rel="prefetch" href="/assets/ç§’æ€.html-BGaRyDUh.js" as="script"><link rel="prefetch" href="/assets/ç¼“å­˜.html-CRzVv9uF.js" as="script"><link rel="prefetch" href="/assets/é™æµå™¨.html-BN7Ic9vq.js" as="script"><link rel="prefetch" href="/assets/dataInMemory.html-BKq2RmoE.js" as="script"><link rel="prefetch" href="/assets/AOFä¼˜åŒ–-æ··åˆæŒä¹…åŒ–.html-TXDhzyUg.js" as="script"><link rel="prefetch" href="/assets/æŒä¹…åŒ–.html-BnJon-fZ.js" as="script"><link rel="prefetch" href="/assets/uber.zap.html-BoP5jOfj.js" as="script"><link rel="prefetch" href="/assets/Kratos.html-DFNw5U5M.js" as="script"><link rel="prefetch" href="/assets/Gorm.html-DGLL8c7U.js" as="script"><link rel="prefetch" href="/assets/Gin.html-crIxNQCS.js" as="script"><link rel="prefetch" href="/assets/bcryptåŠ å¯†.html-C8i-TL5Z.js" as="script"><link rel="prefetch" href="/assets/404.html-CW0z_wC5.js" as="script"><link rel="prefetch" href="/assets/index.html-DsRepDZV.js" as="script"><link rel="prefetch" href="/assets/index.html-Ur28xU9j.js" as="script"><link rel="prefetch" href="/assets/index.html-Bfc8zwmk.js" as="script"><link rel="prefetch" href="/assets/index.html-ca0LQFVJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BbXH8z8M.js" as="script"><link rel="prefetch" href="/assets/index.html-Cfotlke9.js" as="script"><link rel="prefetch" href="/assets/index.html-DpxYAtsm.js" as="script"><link rel="prefetch" href="/assets/index.html-DVskY8iv.js" as="script"><link rel="prefetch" href="/assets/index.html-BSNdvbiF.js" as="script"><link rel="prefetch" href="/assets/index.html-CvNi9mMu.js" as="script"><link rel="prefetch" href="/assets/index.html-CyJWL-rI.js" as="script"><link rel="prefetch" href="/assets/index.html-Ch2eUQFQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DuZrNLNo.js" as="script"><link rel="prefetch" href="/assets/index.html-C0jVoGUm.js" as="script"><link rel="prefetch" href="/assets/index.html-DLGDdtsK.js" as="script"><link rel="prefetch" href="/assets/index.html-BiDRm6nm.js" as="script"><link rel="prefetch" href="/assets/index.html-JC_u6EOm.js" as="script"><link rel="prefetch" href="/assets/index.html-BMxw4ygM.js" as="script"><link rel="prefetch" href="/assets/index.html-CVpGa40L.js" as="script"><link rel="prefetch" href="/assets/index.html-C3nHm_Jb.js" as="script"><link rel="prefetch" href="/assets/index.html-DVPiGgt-.js" as="script"><link rel="prefetch" href="/assets/index.html-07i1R1F_.js" as="script"><link rel="prefetch" href="/assets/index.html-CjHNOGdQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj5Gdahf.js" as="script"><link rel="prefetch" href="/assets/index.html-7NLyGzjY.js" as="script"><link rel="prefetch" href="/assets/index.html-CEfeKw6s.js" as="script"><link rel="prefetch" href="/assets/index.html-uQHdIbYH.js" as="script"><link rel="prefetch" href="/assets/index.html-yLb6JcIb.js" as="script"><link rel="prefetch" href="/assets/index.html-DdhZNnxd.js" as="script"><link rel="prefetch" href="/assets/index.html-TzT2oNmz.js" as="script"><link rel="prefetch" href="/assets/index.html-DrmfoxV3.js" as="script"><link rel="prefetch" href="/assets/index.html-wDd-f8fI.js" as="script"><link rel="prefetch" href="/assets/index.html-BhN_HSyz.js" as="script"><link rel="prefetch" href="/assets/index.html-BnCf2TKC.js" as="script"><link rel="prefetch" href="/assets/index.html-Bine456b.js" as="script"><link rel="prefetch" href="/assets/index.html-Bq0wyWx0.js" as="script"><link rel="prefetch" href="/assets/index.html-B0WeT6fV.js" as="script"><link rel="prefetch" href="/assets/index.html-NvyoXB8d.js" as="script"><link rel="prefetch" href="/assets/index.html-zTVrNVwP.js" as="script"><link rel="prefetch" href="/assets/index.html-BmpGsG-4.js" as="script"><link rel="prefetch" href="/assets/index.html-DjFJaTcm.js" as="script"><link rel="prefetch" href="/assets/index.html-DoleIlnM.js" as="script"><link rel="prefetch" href="/assets/index.html-DY0zd_iA.js" as="script"><link rel="prefetch" href="/assets/index.html-rnSIeur6.js" as="script"><link rel="prefetch" href="/assets/index.html-albCjJnB.js" as="script"><link rel="prefetch" href="/assets/index.html-DHAgjK5u.js" as="script"><link rel="prefetch" href="/assets/index.html-mx9vFEvD.js" as="script"><link rel="prefetch" href="/assets/index.html-Co0Zou0C.js" as="script"><link rel="prefetch" href="/assets/index.html-DMPWpDta.js" as="script"><link rel="prefetch" href="/assets/index.html-hxuzVaXi.js" as="script"><link rel="prefetch" href="/assets/index.html-DShQueDH.js" as="script"><link rel="prefetch" href="/assets/index.html-D-ZnQ0md.js" as="script"><link rel="prefetch" href="/assets/index.html-CQwZ7Y-w.js" as="script"><link rel="prefetch" href="/assets/index.html-SAfYTpPv.js" as="script"><link rel="prefetch" href="/assets/index.html-B2yxro9r.js" as="script"><link rel="prefetch" href="/assets/index.html-BH-iSNrw.js" as="script"><link rel="prefetch" href="/assets/index.html-C1Zh7A5T.js" as="script"><link rel="prefetch" href="/assets/index.html-DQLtjUeq.js" as="script"><link rel="prefetch" href="/assets/index.html-DegJzrrG.js" as="script"><link rel="prefetch" href="/assets/index.html-50tne7Hi.js" as="script"><link rel="prefetch" href="/assets/index.html-CaRyWdZ-.js" as="script"><link rel="prefetch" href="/assets/index.html-CswukXAQ.js" as="script"><link rel="prefetch" href="/assets/index.html-B4X1w4gU.js" as="script"><link rel="prefetch" href="/assets/index.html-CY7FBXqt.js" as="script"><link rel="prefetch" href="/assets/index.html-ClIVeJ7l.js" as="script"><link rel="prefetch" href="/assets/index.html-BS6lSHSQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DhfrHlco.js" as="script"><link rel="prefetch" href="/assets/index.html-e1Nnwzb-.js" as="script"><link rel="prefetch" href="/assets/index.html-Dt92_0BM.js" as="script"><link rel="prefetch" href="/assets/index.html-DT5NupV9.js" as="script"><link rel="prefetch" href="/assets/index.html--mY_fJHy.js" as="script"><link rel="prefetch" href="/assets/index.html-dsDCbnii.js" as="script"><link rel="prefetch" href="/assets/index.html-ioU5D0Vg.js" as="script"><link rel="prefetch" href="/assets/index.html-DbmLqcxL.js" as="script"><link rel="prefetch" href="/assets/index.html-BbgfZncT.js" as="script"><link rel="prefetch" href="/assets/index.html-CllQgBk-.js" as="script"><link rel="prefetch" href="/assets/index.html-DgrgmOzH.js" as="script"><link rel="prefetch" href="/assets/index.html-CxyUGFT-.js" as="script"><link rel="prefetch" href="/assets/index.html-BBCV2z16.js" as="script"><link rel="prefetch" href="/assets/index.html-B745HPpM.js" as="script"><link rel="prefetch" href="/assets/index.html-fHyYkrSK.js" as="script"><link rel="prefetch" href="/assets/index.html-l9-Ue-Ki.js" as="script"><link rel="prefetch" href="/assets/index.html-CqJ8Bvit.js" as="script"><link rel="prefetch" href="/assets/index.html-DlQO2gXn.js" as="script"><link rel="prefetch" href="/assets/index.html-DgYozVKO.js" as="script"><link rel="prefetch" href="/assets/index.html-C4hknF7Y.js" as="script"><link rel="prefetch" href="/assets/index.html-DrE69CU2.js" as="script"><link rel="prefetch" href="/assets/index.html-DHcGqR4c.js" as="script"><link rel="prefetch" href="/assets/index.html-CMaj6xxr.js" as="script"><link rel="prefetch" href="/assets/index.html-Cwsx4MFN.js" as="script"><link rel="prefetch" href="/assets/index.html-mIaSy6u6.js" as="script"><link rel="prefetch" href="/assets/index.html-BlnYtnyQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz0eQV6S.js" as="script"><link rel="prefetch" href="/assets/index.html-Bb2fVf-z.js" as="script"><link rel="prefetch" href="/assets/index.html-CCkN7vxT.js" as="script"><link rel="prefetch" href="/assets/index.html-CLIVxLw7.js" as="script"><link rel="prefetch" href="/assets/index.html-9CrMcA5O.js" as="script"><link rel="prefetch" href="/assets/index.html-CxTmi9v8.js" as="script"><link rel="prefetch" href="/assets/index.html-Cj7XLGEH.js" as="script"><link rel="prefetch" href="/assets/index.html-BPQ9nqe4.js" as="script"><link rel="prefetch" href="/assets/index.html-CSBLUTeo.js" as="script"><link rel="prefetch" href="/assets/index.html-DPrjOnqv.js" as="script"><link rel="prefetch" href="/assets/index.html-C1M1lYLn.js" as="script"><link rel="prefetch" href="/assets/index.html-DSSsd08J.js" as="script"><link rel="prefetch" href="/assets/index.html-C3CihSF9.js" as="script"><link rel="prefetch" href="/assets/index.html-D_T3OvEd.js" as="script"><link rel="prefetch" href="/assets/index.html-DKEJcnLL.js" as="script"><link rel="prefetch" href="/assets/index.html-HjE2gdkx.js" as="script"><link rel="prefetch" href="/assets/index.html-COmcJAAv.js" as="script"><link rel="prefetch" href="/assets/index.html-Cdtltwio.js" as="script"><link rel="prefetch" href="/assets/index.html-DgHPW7fX.js" as="script"><link rel="prefetch" href="/assets/index.html-BFHlqyiV.js" as="script"><link rel="prefetch" href="/assets/index.html-7D-_JXzz.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr8VCIfT.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh10J7dX.js" as="script"><link rel="prefetch" href="/assets/index.html-CzjACoSi.js" as="script"><link rel="prefetch" href="/assets/index.html-B_Qvf21Y.js" as="script"><link rel="prefetch" href="/assets/index.html-DLpqEt0q.js" as="script"><link rel="prefetch" href="/assets/index.html-CVwPWWEL.js" as="script"><link rel="prefetch" href="/assets/index.html-Ck7DMLor.js" as="script"><link rel="prefetch" href="/assets/index.html-_W1nRnO5.js" as="script"><link rel="prefetch" href="/assets/index.html-BDSWIR-Y.js" as="script"><link rel="prefetch" href="/assets/index.html-B91goNQX.js" as="script"><link rel="prefetch" href="/assets/index.html-DTC4aACZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CAeRV6-V.js" as="script"><link rel="prefetch" href="/assets/index.html-D0NvDApj.js" as="script"><link rel="prefetch" href="/assets/index.html-41HFrAWl.js" as="script"><link rel="prefetch" href="/assets/index.html-CXDVZLRq.js" as="script"><link rel="prefetch" href="/assets/index.html-CG_4apep.js" as="script"><link rel="prefetch" href="/assets/index.html-SdE8067p.js" as="script"><link rel="prefetch" href="/assets/index.html-Btaz-thV.js" as="script"><link rel="prefetch" href="/assets/index.html-mwEFecqf.js" as="script"><link rel="prefetch" href="/assets/index.html-CxmG-0AX.js" as="script"><link rel="prefetch" href="/assets/index.html-DtSN2_BI.js" as="script"><link rel="prefetch" href="/assets/index.html-BYbRsK5e.js" as="script"><link rel="prefetch" href="/assets/index.html-B92zdwYE.js" as="script"><link rel="prefetch" href="/assets/index.html-ClLRikJ8.js" as="script"><link rel="prefetch" href="/assets/index.html-BgmF4R46.js" as="script"><link rel="prefetch" href="/assets/index.html-2bwVDzAy.js" as="script"><link rel="prefetch" href="/assets/index.html-BBi3BHAK.js" as="script"><link rel="prefetch" href="/assets/index.html-BSuB6RNy.js" as="script"><link rel="prefetch" href="/assets/index.html-CLSiYHmm.js" as="script"><link rel="prefetch" href="/assets/index.html-7tZBrjiQ.js" as="script"><link rel="prefetch" href="/assets/index.html-a35g3e9j.js" as="script"><link rel="prefetch" href="/assets/index.html-DIWME3Ny.js" as="script"><link rel="prefetch" href="/assets/index.html-T85IVSAJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BxtOXDA9.js" as="script"><link rel="prefetch" href="/assets/index.html-CbcZ8yET.js" as="script"><link rel="prefetch" href="/assets/index.html-C58FgwRk.js" as="script"><link rel="prefetch" href="/assets/index.html-CTUpt-PU.js" as="script"><link rel="prefetch" href="/assets/index.html-DchY4sZ9.js" as="script"><link rel="prefetch" href="/assets/index.html-C1IJkf9-.js" as="script"><link rel="prefetch" href="/assets/index.html-Bryc9uFZ.js" as="script"><link rel="prefetch" href="/assets/index.html-B31Cfh0H.js" as="script"><link rel="prefetch" href="/assets/index.html-P9pn2qy3.js" as="script"><link rel="prefetch" href="/assets/index.html-BqVh914T.js" as="script"><link rel="prefetch" href="/assets/index.html-Dy7aY5TJ.js" as="script"><link rel="prefetch" href="/assets/index.html-B_vN62I5.js" as="script"><link rel="prefetch" href="/assets/index.html-CtAG8v9G.js" as="script"><link rel="prefetch" href="/assets/index.html-fcP4R_Of.js" as="script"><link rel="prefetch" href="/assets/index.html-yMkyKxMi.js" as="script"><link rel="prefetch" href="/assets/index.html-D90SNE-g.js" as="script"><link rel="prefetch" href="/assets/index.html-BSyKOfIh.js" as="script"><link rel="prefetch" href="/assets/index.html-CIxUQJLu.js" as="script"><link rel="prefetch" href="/assets/index.html-DgQyE5Sj.js" as="script"><link rel="prefetch" href="/assets/index.html-IvZA1bBS.js" as="script"><link rel="prefetch" href="/assets/index.html-Dy6oys0r.js" as="script"><link rel="prefetch" href="/assets/index.html-D37mxarN.js" as="script"><link rel="prefetch" href="/assets/index.html-DN7jVjM_.js" as="script"><link rel="prefetch" href="/assets/index.html-CE-pVuFQ.js" as="script"><link rel="prefetch" href="/assets/index.html-BVuKkuuW.js" as="script"><link rel="prefetch" href="/assets/index.html-DeNEzfOf.js" as="script"><link rel="prefetch" href="/assets/index.html-BIBBWJPu.js" as="script"><link rel="prefetch" href="/assets/index.html-BTMeVrtQ.js" as="script"><link rel="prefetch" href="/assets/index.html-L7BTDzw4.js" as="script"><link rel="prefetch" href="/assets/index.html-CJej2idl.js" as="script"><link rel="prefetch" href="/assets/index.html-Dyma16aV.js" as="script"><link rel="prefetch" href="/assets/index.html-BXGIpBvK.js" as="script"><link rel="prefetch" href="/assets/index.html-BmzpHCJh.js" as="script"><link rel="prefetch" href="/assets/index.html-Ds7TPQeT.js" as="script"><link rel="prefetch" href="/assets/index.html-B52lO0bg.js" as="script"><link rel="prefetch" href="/assets/index.html-BUKkS2gW.js" as="script"><link rel="prefetch" href="/assets/index.html-DO0AWRlR.js" as="script"><link rel="prefetch" href="/assets/index.html-uRj77juW.js" as="script"><link rel="prefetch" href="/assets/index.html-Bj9HeJZ6.js" as="script"><link rel="prefetch" href="/assets/index.html-BclnIbpT.js" as="script"><link rel="prefetch" href="/assets/index.html-DBycJZmk.js" as="script"><link rel="prefetch" href="/assets/index.html-C_-SJL0J.js" as="script"><link rel="prefetch" href="/assets/index.html-VnqTS-Pe.js" as="script"><link rel="prefetch" href="/assets/index.html-ZRs_Gq35.js" as="script"><link rel="prefetch" href="/assets/index.html-BGuNDkeL.js" as="script"><link rel="prefetch" href="/assets/index.html-CpqimSA3.js" as="script"><link rel="prefetch" href="/assets/index.html-DCdmyFJO.js" as="script"><link rel="prefetch" href="/assets/index.html-B5kzuvp9.js" as="script"><link rel="prefetch" href="/assets/index.html-SZ4jWgjb.js" as="script"><link rel="prefetch" href="/assets/index.html-CGinXJFY.js" as="script"><link rel="prefetch" href="/assets/index.html-Ci0CuyAS.js" as="script"><link rel="prefetch" href="/assets/index.html-B9Z7jENU.js" as="script"><link rel="prefetch" href="/assets/index.html-DZU44tVO.js" as="script"><link rel="prefetch" href="/assets/index.html-czMV-vXS.js" as="script"><link rel="prefetch" href="/assets/index.html-DYc1DHcz.js" as="script"><link rel="prefetch" href="/assets/index.html-De-ypI7S.js" as="script"><link rel="prefetch" href="/assets/index.html-DXhC62Zk.js" as="script"><link rel="prefetch" href="/assets/index.html-DlXrJIW7.js" as="script"><link rel="prefetch" href="/assets/index.html-DBBUvXp3.js" as="script"><link rel="prefetch" href="/assets/index.html-B9MEvycL.js" as="script"><link rel="prefetch" href="/assets/index.html-aqcDDj9L.js" as="script"><link rel="prefetch" href="/assets/index.html-Brp3TOVL.js" as="script"><link rel="prefetch" href="/assets/index.html-Ddz5WKmz.js" as="script"><link rel="prefetch" href="/assets/index.html-1-H07r7c.js" as="script"><link rel="prefetch" href="/assets/index.html-gDKgm1af.js" as="script"><link rel="prefetch" href="/assets/index.html-46RXrs7B.js" as="script"><link rel="prefetch" href="/assets/index.html-BVi3iPZq.js" as="script"><link rel="prefetch" href="/assets/index.html-DzBVrUdI.js" as="script"><link rel="prefetch" href="/assets/index.html-CXHOq4-d.js" as="script"><link rel="prefetch" href="/assets/index.html-BcZE59Q8.js" as="script"><link rel="prefetch" href="/assets/index.html-DDMbqKiP.js" as="script"><link rel="prefetch" href="/assets/index.html-BTE0Yqaq.js" as="script"><link rel="prefetch" href="/assets/index.html-CN5vdkZZ.js" as="script"><link rel="prefetch" href="/assets/index.html-D5Hfw3Ka.js" as="script"><link rel="prefetch" href="/assets/index.html-B6IV5DMS.js" as="script"><link rel="prefetch" href="/assets/index.html-DXzme60Q.js" as="script"><link rel="prefetch" href="/assets/index.html-DtrNyA3n.js" as="script"><link rel="prefetch" href="/assets/index.html-B9owzh2K.js" as="script"><link rel="prefetch" href="/assets/index.html-DoklpgrK.js" as="script"><link rel="prefetch" href="/assets/index.html-DfU7uNfu.js" as="script"><link rel="prefetch" href="/assets/index.html-2zcjXKhG.js" as="script"><link rel="prefetch" href="/assets/index.html-QEXrA-ft.js" as="script"><link rel="prefetch" href="/assets/index.html-B8Th92JD.js" as="script"><link rel="prefetch" href="/assets/index.html-D8MIQ6dF.js" as="script"><link rel="prefetch" href="/assets/index.html-BNpsDm4f.js" as="script"><link rel="prefetch" href="/assets/index.html-Du3YX7VB.js" as="script"><link rel="prefetch" href="/assets/index.html-BKRpcKNd.js" as="script"><link rel="prefetch" href="/assets/index.html-DK8iHN71.js" as="script"><link rel="prefetch" href="/assets/index.html-CI5DlDTX.js" as="script"><link rel="prefetch" href="/assets/index.html-D_NX-0SG.js" as="script"><link rel="prefetch" href="/assets/index.html-B9T45_Q2.js" as="script"><link rel="prefetch" href="/assets/index.html-CzmuDEKx.js" as="script"><link rel="prefetch" href="/assets/index.html-DCXh4fc-.js" as="script"><link rel="prefetch" href="/assets/index.html-d_EEawzv.js" as="script"><link rel="prefetch" href="/assets/index.html-ddwPd5sR.js" as="script"><link rel="prefetch" href="/assets/index.html-CkE1WgVK.js" as="script"><link rel="prefetch" href="/assets/index.html-mm93UfZR.js" as="script"><link rel="prefetch" href="/assets/index.html-DiKrk0ZL.js" as="script"><link rel="prefetch" href="/assets/index.html-DKqosmw1.js" as="script"><link rel="prefetch" href="/assets/index.html-CO4I-AtJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BtHmplTe.js" as="script"><link rel="prefetch" href="/assets/index.html-Xk-qrmac.js" as="script"><link rel="prefetch" href="/assets/index.html-B1SC2pBo.js" as="script"><link rel="prefetch" href="/assets/index.html-DXgJsz-k.js" as="script"><link rel="prefetch" href="/assets/index.html-CXmcLVJf.js" as="script"><link rel="prefetch" href="/assets/index.html-CyB3vJC-.js" as="script"><link rel="prefetch" href="/assets/index.html-Bg5NylJo.js" as="script"><link rel="prefetch" href="/assets/index.html-PTRicCL-.js" as="script"><link rel="prefetch" href="/assets/index.html-DT4fGwsg.js" as="script"><link rel="prefetch" href="/assets/index.html-fFF_nzfB.js" as="script"><link rel="prefetch" href="/assets/index.html-Ctnq41Mi.js" as="script"><link rel="prefetch" href="/assets/index.html-DfA0BbRe.js" as="script"><link rel="prefetch" href="/assets/index.html-DaWWEIqh.js" as="script"><link rel="prefetch" href="/assets/index.html-Co3Q6koA.js" as="script"><link rel="prefetch" href="/assets/index.html-BMZmcVog.js" as="script"><link rel="prefetch" href="/assets/index.html-ffBnhuaj.js" as="script"><link rel="prefetch" href="/assets/index.html-VIiYCdFk.js" as="script"><link rel="prefetch" href="/assets/index.html-Dv5ddMcC.js" as="script"><link rel="prefetch" href="/assets/index.html-D9CtQRPP.js" as="script"><link rel="prefetch" href="/assets/index.html-Bc40WwjS.js" as="script"><link rel="prefetch" href="/assets/index.html-DWaIP7Yh.js" as="script"><link rel="prefetch" href="/assets/index.html-ClI_My4l.js" as="script"><link rel="prefetch" href="/assets/index.html-gSNTrGpD.js" as="script"><link rel="prefetch" href="/assets/index.html-CBjAUHHh.js" as="script"><link rel="prefetch" href="/assets/index.html-Bim0DVcH.js" as="script"><link rel="prefetch" href="/assets/index.html-B5Kpe61l.js" as="script"><link rel="prefetch" href="/assets/index.html-eu8STz5U.js" as="script"><link rel="prefetch" href="/assets/index.html-DxcdKkkv.js" as="script"><link rel="prefetch" href="/assets/index.html-DlbQ7jbH.js" as="script"><link rel="prefetch" href="/assets/index.html-BPIMz9Vu.js" as="script"><link rel="prefetch" href="/assets/index.html-BPMKWI7Y.js" as="script"><link rel="prefetch" href="/assets/index.html-7X6Fh_8l.js" as="script"><link rel="prefetch" href="/assets/index.html-CR1u1wM9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cg2EdcyC.js" as="script"><link rel="prefetch" href="/assets/index.html-CQJnkAgB.js" as="script"><link rel="prefetch" href="/assets/index.html-CyzIT8ev.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-JtuA-UkO.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-ByO6wJcw.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><!----><!----><span class="vp-site-name">ğŸ§kryiea</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="é¦–é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->é¦–é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åç«¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-yin-yang" style=""></span>åç«¯<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/java/" aria-label="Java"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/go/" aria-label="Go"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-golang" style=""></span><!--]-->Go<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/C__/" aria-label="C++"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-code" style=""></span><!--]-->C++<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/linux/" aria-label="Linux"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span><!--]-->Linux<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/back-end/mysql/" aria-label="MySQL"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/redis/" aria-label="Redis"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/kafka/" aria-label="Kafka"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-server" style=""></span><!--]-->Kafka<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/docker/" aria-label="Docker"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-docker" style=""></span><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/distributed/" aria-label="åˆ†å¸ƒå¼"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-network-wired" style=""></span><!--]-->åˆ†å¸ƒå¼<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/microservice/" aria-label="å¾®æœåŠ¡"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-cubes" style=""></span><!--]-->å¾®æœåŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/algorithm/" aria-label="ç®—æ³•"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-code-branch" style=""></span><!--]-->ç®—æ³•<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/network/" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-globe" style=""></span><!--]-->è®¡ç®—æœºç½‘ç»œ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/back-end/Back-endOptimizationScenarios/" aria-label="åç«¯ä¼˜åŒ–åœºæ™¯"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-gauge-high" style=""></span><!--]-->åç«¯ä¼˜åŒ–åœºæ™¯<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/front-end/" aria-label="å‰ç«¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-masks-theater" style=""></span><!--]-->å‰ç«¯<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/devConfig/" aria-label="é…ç½®&amp;æ’ä»¶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><!--]-->é…ç½®&amp;æ’ä»¶<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/intro.html" aria-label="å…³äº"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-user" style=""></span><!--]-->å…³äº<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://kryiea.github.io/" target="_blank" rel="noopener noreferrer" aria-label="Source"><svg xmlns="http://www.w3.org/2000/svg" class="icon source-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="source icon" name="source" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M601.92 475.2c0 76.428-8.91 83.754-28.512 99.594-14.652 11.88-43.956 14.058-78.012 16.434-18.81 1.386-40.392 2.97-62.172 6.534-18.612 2.97-36.432 9.306-53.064 17.424V299.772c37.818-21.978 63.36-62.766 63.36-109.692 0-69.894-56.826-126.72-126.72-126.72S190.08 120.186 190.08 190.08c0 46.926 25.542 87.714 63.36 109.692v414.216c-37.818 21.978-63.36 62.766-63.36 109.692 0 69.894 56.826 126.72 126.72 126.72s126.72-56.826 126.72-126.72c0-31.086-11.286-59.598-29.7-81.576 13.266-9.504 27.522-17.226 39.996-19.206 16.038-2.574 32.868-3.762 50.688-5.148 48.312-3.366 103.158-7.326 148.896-44.55 61.182-49.698 74.25-103.158 75.24-187.902V475.2h-126.72zM316.8 126.72c34.848 0 63.36 28.512 63.36 63.36s-28.512 63.36-63.36 63.36-63.36-28.512-63.36-63.36 28.512-63.36 63.36-63.36zm0 760.32c-34.848 0-63.36-28.512-63.36-63.36s28.512-63.36 63.36-63.36 63.36 28.512 63.36 63.36-28.512 63.36-63.36 63.36zM823.68 158.4h-95.04V63.36h-126.72v95.04h-95.04v126.72h95.04v95.04h126.72v-95.04h95.04z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:none;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:block;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-golang" style=""></span><span class="vp-sidebar-title">Go</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span><span class="vp-sidebar-title">MySQL</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fa-solid fa-layer-group" style=""></span><span class="vp-sidebar-title">åŸºç¡€æ¦‚å¿µ</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/back-end/mysql/basis/log.html" aria-label="MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£"><!---->MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fa-solid fa-code" style=""></span><span class="vp-sidebar-title">SQL</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/sql/sql%E8%AF%AD%E6%B3%95.html" aria-label="MySQL SQLè¯­æ³•è¯¦è§£"><!---->MySQL SQLè¯­æ³•è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/sql/sql%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.html" aria-label="MySQL SQLæ‰§è¡Œé¡ºåºè¯¦è§£"><!---->MySQL SQLæ‰§è¡Œé¡ºåºè¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/sql/sql%E7%B4%A2%E5%BC%95.html" aria-label="MySQLç´¢å¼•ä½¿ç”¨æŒ‡å—"><!---->MySQLç´¢å¼•ä½¿ç”¨æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/sql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" aria-label="MySQLæ•°æ®ç±»å‹è¯¦è§£"><!---->MySQLæ•°æ®ç±»å‹è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/sql/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86.html" aria-label="MySQLæ•°æ®åº“ç®¡ç†æŒ‡å—"><!---->MySQLæ•°æ®åº“ç®¡ç†æŒ‡å—<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fa-solid fa-gears" style=""></span><span class="vp-sidebar-title">åŸç†</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E5%8E%9F%E7%90%86%E5%88%86%E7%B1%BB.html" aria-label="MySQLåŸç†åˆ†ç±»"><!---->MySQLåŸç†åˆ†ç±»<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84.html" aria-label="MySQLé€»è¾‘æ¶æ„è¯¦è§£"><!---->MySQLé€»è¾‘æ¶æ„è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html" aria-label="InnoDBå­˜å‚¨å¼•æ“è¯¦è§£"><!---->InnoDBå­˜å‚¨å¼•æ“è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E7%B4%A2%E5%BC%95.html" aria-label="MySQLç´¢å¼•åŸç†è¯¦è§£"><!---->MySQLç´¢å¼•åŸç†è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E4%BA%8B%E5%8A%A1.html" aria-label="MySQLäº‹åŠ¡æœºåˆ¶è¯¦è§£"><!---->MySQLäº‹åŠ¡æœºåˆ¶è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E9%94%81.html" aria-label="MySQLé”æœºåˆ¶è¯¦è§£"><!---->MySQLé”æœºåˆ¶è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E6%97%A5%E5%BF%97.html" aria-label="MySQLæ—¥å¿—ç³»ç»ŸåŸç†è¯¦è§£"><!---->MySQLæ—¥å¿—ç³»ç»ŸåŸç†è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/principle/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98.html" aria-label="MySQLæ€§èƒ½è°ƒä¼˜æŒ‡å—"><!---->MySQLæ€§èƒ½è°ƒä¼˜æŒ‡å—<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fa-solid fa-shield-halved" style=""></span><span class="vp-sidebar-title">é«˜å¯ç”¨</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/High-availability/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8.html" aria-label="MySQLåˆ†åº“åˆ†è¡¨å®è·µ"><!---->MySQLåˆ†åº“åˆ†è¡¨å®è·µ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/back-end/mysql/High-availability/%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E3%80%81%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5.html" aria-label="MySQLè¯»å†™åˆ†ç¦»ä¸ä¸»ä»åŒæ­¥è¯¦è§£"><!---->MySQLè¯»å†™åˆ†ç¦»ä¸ä¸»ä»åŒæ­¥è¯¦è§£<!----></a></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-docker" style=""></span><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span><span class="vp-sidebar-title">Redis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-message" style=""></span><span class="vp-sidebar-title">Kafka</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-code" style=""></span><span class="vp-sidebar-title">C++</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-network-wired" style=""></span><span class="vp-sidebar-title">åˆ†å¸ƒå¼</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-gauge-high" style=""></span><span class="vp-sidebar-title">åç«¯ä¼˜åŒ–åœºæ™¯</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-cubes" style=""></span><span class="vp-sidebar-title">å¾®æœåŠ¡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-code-branch" style=""></span><span class="vp-sidebar-title">ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-globe" style=""></span><span class="vp-sidebar-title">è®¡ç®—æœºç½‘ç»œ</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/kryiea" target="_blank" rel="noopener noreferrer">kryiea</a></span><span property="author" content="kryiea"></span></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024å¹´1æœˆ1æ—¥</span><meta property="datePublished" content="2024-01-01T00:00:00.000Z"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7 clickable" role="navigation">æ•°æ®åº“</span><span class="page-category-item color6 clickable" role="navigation">MySQL</span><!--]--><meta property="articleSection" content="æ•°æ®åº“,MySQL"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color6 clickable" role="navigation">MySQL</span><span class="page-tag-item color6 clickable" role="navigation">æ•°æ®åº“æ—¥å¿—</span><span class="page-tag-item color4 clickable" role="navigation">binlog</span><span class="page-tag-item color7 clickable" role="navigation">redo log</span><span class="page-tag-item color7 clickable" role="navigation">undo log</span><!--]--><meta property="keywords" content="MySQL,æ•°æ®åº“æ—¥å¿—,binlog,redo log,undo log"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ä¸€æ¡-select-è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹">1. ä¸€æ¡ select è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-ä¸€æ¡-update-è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹">2. ä¸€æ¡ update è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-ä¸‰ç§æ—¥å¿—ã€mvccã€bufferpool-ä¹‹é—´çš„ç›¸äº’é…åˆ">3. ä¸‰ç§æ—¥å¿—ã€MVCCã€BufferPool ä¹‹é—´çš„ç›¸äº’é…åˆ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-ä¸‰ç§æ—¥å¿—çš„ä¸»è¦ä½œç”¨">3.1 ä¸‰ç§æ—¥å¿—çš„ä¸»è¦ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-undolog-å›æ»šæ—¥å¿—">3.2 UndoLog å›æ»šæ—¥å¿—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-1-ä¸ºä»€ä¹ˆéœ€è¦-undolog">3.2.1 ä¸ºä»€ä¹ˆéœ€è¦ UndoLog</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-2-è®¤è¯†-undolog-æœºåˆ¶">3.2.2 è®¤è¯† Undolog æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-3-undolog-å¦‚ä½•è®°å½•å’Œå›æ»š">3.2.3 Undolog å¦‚ä½•è®°å½•å’Œå›æ»š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-4-undolog-æ—¥å¿—çš„æ ¼å¼">3.2.4 Undolog æ—¥å¿—çš„æ ¼å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-5-undolog-readview-å®ç°-mvcc">3.2.5 Undolog + ReadView å®ç° MVCC</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-6-readview-æœºåˆ¶">3.2.6 ReadView æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-2-7-undolog-å¦‚ä½•åˆ·ç›˜çš„">3.2.7 UndoLog å¦‚ä½•åˆ·ç›˜çš„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-3-buffer-pool-ç¼“å†²æ± ">3.3 Buffer Pool ç¼“å†²æ± </a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-3-1-buffer-pool-çš„æ„ä¹‰">3.3.1 Buffer Pool çš„æ„ä¹‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-3-2-buffer-pool-ç¼“å­˜ä»€ä¹ˆ">3.3.2 Buffer Pool ç¼“å­˜ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-3-3-buffer-pool-åˆ·ç›˜ç­–ç•¥">3.3.3 Buffer Pool åˆ·ç›˜ç­–ç•¥</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-4-redolog-é‡åšæ—¥å¿—">3.4 RedoLog é‡åšæ—¥å¿—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-1-ä¸ºä»€ä¹ˆéœ€è¦-redolog">3.4.1 ä¸ºä»€ä¹ˆéœ€è¦ Redolog</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-2-è®¤è¯†-redolog-æœºåˆ¶">3.4.2 è®¤è¯† Redolog æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-3-redolog-ä¸-undolog-çš„é…åˆ">3.4.3 Redolog ä¸ Undolog çš„é…åˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-4-redologä¸æ•°æ®åˆ†å¼€å†™å…¥ç£ç›˜çš„å¿…è¦æ€§">3.4.4 Redologä¸æ•°æ®åˆ†å¼€å†™å…¥ç£ç›˜çš„å¿…è¦æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-5-redolog-çš„åˆ·ç›˜ç­–ç•¥">3.4.5 Redolog çš„åˆ·ç›˜ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-6-redolog-buffer-çš„åˆ·ç›˜æ—¶æœº">3.4.6 redolog buffer çš„åˆ·ç›˜æ—¶æœºï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-4-7-redolog-æ—¥å¿—é‡å†™">3.4.7 Redolog æ—¥å¿—é‡å†™</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-5-binlog-é‡åšæ—¥å¿—">3.5 BinLog é‡åšæ—¥å¿—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-5-1-binlog-çš„ä½œç”¨">3.5.1 Binlog çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-5-2-binlog-åˆ·ç›˜ç­–ç•¥">3.5.2 Binlog åˆ·ç›˜ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-5-3-binlog-ä¸»ä»åŒæ­¥æ¨¡å‹">3.5.3 Binlog - ä¸»ä»åŒæ­¥æ¨¡å‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-6-ä¸¤é˜¶æ®µæäº¤">3.6 ä¸¤é˜¶æ®µæäº¤</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-6-1-ä¸¤é˜¶æ®µæäº¤çš„æå‡º">3.6.1 ä¸¤é˜¶æ®µæäº¤çš„æå‡º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-6-2-ä¸¤é˜¶æ®µæäº¤çš„æ¦‚å¿µ">3.6.2 ä¸¤é˜¶æ®µæäº¤çš„æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-6-3-ä¸¤é˜¶æ®µæäº¤çš„è¿‡ç¨‹">3.6.3 ä¸¤é˜¶æ®µæäº¤çš„è¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-6-4-ä¸¤é˜¶æ®µæäº¤æœ‰ä»€ä¹ˆé—®é¢˜">3.6.4 ä¸¤é˜¶æ®µæäº¤æœ‰ä»€ä¹ˆé—®é¢˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3-6-5-å¯¹ä¸¤é˜¶æ®µæäº¤åŠ å¼º-åŠ å…¥ç»„æäº¤">3.6.5 å¯¹ä¸¤é˜¶æ®µæäº¤åŠ å¼ºï¼šåŠ å…¥ç»„æäº¤</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="mysqlæ—¥å¿—ç³»ç»Ÿè¯¦è§£" tabindex="-1"><a class="header-anchor" href="#mysqlæ—¥å¿—ç³»ç»Ÿè¯¦è§£"><span>MySQLæ—¥å¿—ç³»ç»Ÿè¯¦è§£</span></a></h1><p>ä»ç†è§£ SQL æ‰§è¡Œè¿‡ç¨‹åˆ°ç†è§£MySQL æ—¥å¿—ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹ã€‚</p><!-- more --><h2 id="_1-ä¸€æ¡-select-è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-ä¸€æ¡-select-è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹"><span>1. ä¸€æ¡ select è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹</span></a></h2><p>ä¸€æ¡æŸ¥è¯¢è¯­å¥æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå±äº<strong>è¯»</strong>ä¸€æ¡è®°å½•çš„è¿‡ç¨‹ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p><strong>å»ºç«‹å®¢æˆ·ç«¯/æœåŠ¡å™¨é€šä¿¡</strong>ï¼š</p><ul><li>å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚ï¼Œé€šè¿‡MySQL<code>è¿æ¥å™¨</code>å¤„ç†åï¼Œå®¢æˆ·ç«¯å°†SQLæŸ¥è¯¢è¯­å¥å‘é€åˆ°æœåŠ¡å™¨ã€‚</li></ul></li><li><p><strong>æŸ¥è¯¢è§£æ</strong>ï¼š</p><ul><li><strong>SQLè§£æå™¨</strong>ï¼š<code>SQLè§£æå™¨</code>é¦–å…ˆä¼šå¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œè¯­æ³•å’Œè¯æ³•åˆ†æï¼Œç”Ÿæˆä¸€ä¸ªè§£ææ ‘ï¼ˆParse Treeï¼‰ã€‚</li><li><strong>é¢„å¤„ç†å™¨</strong>ï¼š<code>é¢„å¤„ç†å™¨</code>è¿›ä¸€æ­¥æ£€æŸ¥è§£ææ ‘çš„åˆæ³•æ€§ï¼ŒåŒ…æ‹¬è¡¨å’Œåˆ—æ˜¯å¦å­˜åœ¨ã€åç§°æ˜¯å¦æ­£ç¡®ç­‰ã€‚</li></ul></li><li><p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼š</p><ul><li><strong>æŸ¥è¯¢é‡å†™</strong>ï¼š<code>ä¼˜åŒ–å™¨</code>å¯èƒ½ä¼šå¯¹è§£ææ ‘è¿›è¡Œé‡å†™ï¼Œä¾‹å¦‚å°†å­æŸ¥è¯¢è½¬æ¢ä¸ºè¿æ¥ï¼ˆJOINï¼‰ï¼Œæˆ–è€…è¿›è¡ŒæŸäº›å¸¸è§çš„SQLé‡å†™ä¼˜åŒ–ã€‚</li><li><strong>é€‰æ‹©æ‰§è¡Œè®¡åˆ’</strong>ï¼š<code>ä¼˜åŒ–å™¨</code>ä¼šç”Ÿæˆå¤šä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œå¹¶é€‰æ‹©å…¶ä¸­çš„æœ€ä¼˜è®¡åˆ’ã€‚è¿™é‡Œä¼šè€ƒè™‘ç´¢å¼•çš„ä½¿ç”¨ã€è¡¨æ‰«æçš„æ–¹å¼ï¼ˆå…¨è¡¨æ‰«ææˆ–ç´¢å¼•æ‰«æï¼‰ç­‰ã€‚</li><li><strong>æˆæœ¬ä¼°ç®—</strong>ï¼šMySQLä½¿ç”¨ä¸€ç§<code>åŸºäºæˆæœ¬çš„ä¼˜åŒ–ç®—æ³•</code>ï¼Œé€šè¿‡ä¼°ç®—ä¸åŒæ‰§è¡Œè®¡åˆ’çš„ä»£ä»·ï¼Œé€‰æ‹©æˆæœ¬æœ€ä½çš„è®¡åˆ’ã€‚</li></ul></li><li><p><strong>æŸ¥è¯¢æ‰§è¡Œ</strong>ï¼š</p><ul><li><strong>å­˜å‚¨å¼•æ“æ¥å£</strong>ï¼šMySQLçš„<code>æ‰§è¡Œå™¨</code>æ ¹æ®ä¼˜åŒ–å™¨é€‰æ‹©çš„æ‰§è¡Œè®¡åˆ’ï¼Œé€šè¿‡å­˜å‚¨å¼•æ“æ¥å£è°ƒç”¨å…·ä½“çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚InnoDBã€MyISAMç­‰ï¼‰ã€‚</li><li><strong>å­˜å‚¨å¼•æ“æ“ä½œ</strong>ï¼šå­˜å‚¨å¼•æ“æ ¹æ®æ‰§è¡Œå™¨çš„è¯·æ±‚è¿›è¡Œæ•°æ®çš„è¯»å–ã€å†™å…¥ç­‰æ“ä½œã€‚</li></ul></li><li><p><strong>ç»“æœè¿”å›</strong>ï¼š</p><ul><li><strong>ç»“æœé›†å¤„ç†</strong>ï¼šæ‰§è¡Œå™¨å°†å­˜å‚¨å¼•æ“è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆæœ€ç»ˆçš„<code>ç»“æœé›†</code>ã€‚</li><li><strong>ç»“æœå‘é€</strong>ï¼šæœ€ç»ˆçš„ç»“æœé›†é€šè¿‡ç½‘ç»œä¼ è¾“è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ul></li><li><p><strong>ç¼“å­˜å¤„ç†ï¼ˆå¯é€‰ï¼‰</strong>ï¼š</p><ul><li><strong>æŸ¥è¯¢ç¼“å­˜</strong>ï¼šå¦‚æœæŸ¥è¯¢ç¼“å­˜å¼€å¯ä¸”å‘½ä¸­ç¼“å­˜ï¼ŒMySQLä¼šç›´æ¥ä»ç¼“å­˜ä¸­è¿”å›ç»“æœï¼Œè€Œä¸ç»è¿‡ä¸Šè¿°å¤§éƒ¨åˆ†æ­¥éª¤ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQL <strong>8.0 ç‰ˆæœ¬å·²ç§»é™¤æŸ¥è¯¢ç¼“å­˜</strong>è¿™ä¸€ç‰¹æ€§ã€‚</li></ul></li></ol><p>æ€»ç»“æ¥è¯´ï¼ŒMySQLä¸€æ¡æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š<code>å®¢æˆ·ç«¯å‘é€SQLè¯­å¥ -&gt; è§£æè¯­å¥ -&gt; ä¼˜åŒ–æŸ¥è¯¢ -&gt; æ‰§è¡ŒæŸ¥è¯¢ -&gt; è¿”å›ç»“æœ</code>ã€‚æ¯ä¸ªæ­¥éª¤ä¸­éƒ½æœ‰è®¸å¤šç»†èŠ‚å’Œä¼˜åŒ–ç‚¹ï¼Œä½¿å¾—MySQLèƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å„ç§æŸ¥è¯¢è¯·æ±‚ã€‚</p><p>å¼•ç”¨å°æ—å›¾è§£çš„ä¸€å¼ å›¾ï¼š <img src="http://images.kryiea.cn/img/1717220312018.jpg" alt="1717220312018" loading="lazy"></p><h2 id="_2-ä¸€æ¡-update-è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-ä¸€æ¡-update-è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹"><span>2. ä¸€æ¡ update è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹</span></a></h2><p><strong>æ¯”å¦‚è¿™æ¡å¾…æ‰§è¡Œçš„ update è¯­å¥ï¼š</strong><code>UPDATE t_user SET name = &#39;kryiea&#39; WHERE id = 10086;</code></p><p><strong>å¾…æ‰§è¡Œçš„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p><ol><li><code>select</code> è¯­å¥çš„é‚£ä¸€å¥—æµç¨‹ï¼Œ<code>update</code> è¯­å¥ä¹Ÿæ˜¯åŒæ ·ä¼šèµ°ä¸€é</li><li>æŸ¥è¯¢åˆ°ç›®æ ‡è®°å½•åï¼Œæ‰§è¡Œæ›´æ–°æ“ä½œçš„åŒæ—¶ä¼šæ¶‰åŠå¯¹ä¸‰ç§æ—¥å¿—çš„æ”¹åŠ¨ï¼Œ<code>undologã€redologã€binlog</code>ã€‚</li></ol><h2 id="_3-ä¸‰ç§æ—¥å¿—ã€mvccã€bufferpool-ä¹‹é—´çš„ç›¸äº’é…åˆ" tabindex="-1"><a class="header-anchor" href="#_3-ä¸‰ç§æ—¥å¿—ã€mvccã€bufferpool-ä¹‹é—´çš„ç›¸äº’é…åˆ"><span>3. ä¸‰ç§æ—¥å¿—ã€MVCCã€BufferPool ä¹‹é—´çš„ç›¸äº’é…åˆ</span></a></h2><h3 id="_3-1-ä¸‰ç§æ—¥å¿—çš„ä¸»è¦ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_3-1-ä¸‰ç§æ—¥å¿—çš„ä¸»è¦ä½œç”¨"><span>3.1 ä¸‰ç§æ—¥å¿—çš„ä¸»è¦ä½œç”¨</span></a></h3><ul><li><strong>UndoLog å›æ»šæ—¥å¿—ï¼š</strong> æ˜¯Innodbå­˜å‚¨å¼•æ“å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œä¿è¯äº†äº‹åŠ¡ä¸­çš„åŸå­æ€§ï¼Œä¸»è¦ç”¨äºäº‹åŠ¡å›æ»šå’ŒMVCCã€‚ï¼ˆæ’¤é”€å·²ç»æ‰§è¡Œçš„ä¿®æ”¹ï¼Œä¿è¯äº‹åŠ¡çš„åŸå­æ€§å’Œä¸€è‡´æ€§ï¼‰</li><li><strong>RedoLog é‡åšæ—¥å¿—ï¼š</strong> æ˜¯Innodbå­˜å‚¨å¼•æ“å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œä¿è¯äº†äº‹åŠ¡ä¸­çš„æŒä¹…æ€§ï¼Œä¸»è¦ç”¨äºæ‰ç”µç­‰æ•…éšœæ¢å¤ã€‚ï¼ˆé‡åšå·²ç»æäº¤çš„ä¿®æ”¹ï¼Œä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼‰</li><li><strong>BinLog å½’æ¡£æ—¥å¿—ï¼š</strong> æ˜¯ Serverå±‚ ç”Ÿæˆçš„æ—¥å¿—ï¼Œä¸»è¦ç”¨äºæ•°æ®å¤‡ä»½å’Œä¸»ä»å¤åˆ¶ã€‚ï¼ˆè®°å½•å’Œé‡æ”¾SQLè¯­å¥ï¼Œç”¨äºæ•°æ®çš„å¤åˆ¶å’Œæ¢å¤ï¼‰</li></ul><p><strong>â¬‡ï¸è¾…åŠ©ç†è§£ï¼š</strong> InnoDB å­˜å‚¨å¼•æ“çš„æ—¥å¿—ï¼š</p><ul><li>UndoLog è®°å½•äº†æ­¤æ¬¡äº‹åŠ¡ <code>å¼€å§‹å‰</code> çš„æ•°æ®çŠ¶æ€ï¼Œè®°å½•çš„æ˜¯ <code>æ›´æ–° ä¹‹å‰ çš„å€¼</code>ï¼›</li><li>RedoLog è®°å½•äº†æ­¤æ¬¡äº‹åŠ¡ <code>å®Œæˆå</code> çš„æ•°æ®çŠ¶æ€ï¼Œè®°å½•çš„æ˜¯ <code>æ›´æ–° ä¹‹å çš„å€¼</code>ï¼›</li></ul><p>Server å±‚çš„æ—¥å¿—ï¼š</p><ul><li>BinLog è®°å½•äº†å®Œæˆä¸€æ¡æ›´æ–°æ“ä½œåï¼ŒServer å±‚è¿˜ä¼šç”Ÿæˆä¸€æ¡ <code>binlog</code>ï¼Œç­‰ä¹‹åäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¼šå°†è¯¥äº‹ç‰©æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ‰€æœ‰ <code>binlog</code> ç»Ÿä¸€å†™å…¥ <code>binlogæ–‡ä»¶</code>ã€‚</li></ul><h3 id="_3-2-undolog-å›æ»šæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_3-2-undolog-å›æ»šæ—¥å¿—"><span>3.2 UndoLog å›æ»šæ—¥å¿—</span></a></h3><h4 id="_3-2-1-ä¸ºä»€ä¹ˆéœ€è¦-undolog" tabindex="-1"><a class="header-anchor" href="#_3-2-1-ä¸ºä»€ä¹ˆéœ€è¦-undolog"><span>3.2.1 ä¸ºä»€ä¹ˆéœ€è¦ UndoLog</span></a></h4><p><strong>å…ˆäº†è§£éšå¼äº‹åŠ¡ï¼š</strong> Innodb å¼•æ“åœ¨æ‰§è¡Œä¸€æ¡<code>å¢åˆ æ”¹</code>è¯­å¥çš„æ—¶å€™ï¼Œå³ä½¿æ²¡æœ‰æ˜¾å¼è¾“å…¥<code>beginå¼€å¯äº‹åŠ¡</code>å’Œ<code>commitæäº¤äº‹åŠ¡</code>ï¼Œä¹Ÿä¼š<strong>è‡ªåŠ¨éšå¼å¼€å¯äº‹åŠ¡</strong>ã€‚ è€Œä¸”æ‰§è¡Œä¸€æ¡ <code>update</code> è¯­å¥æ˜¯å¦è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œæ˜¯ç”± <code>autocommit</code> å‚æ•°å†³å®šï¼Œé»˜è®¤å¼€å¯ã€‚</p><p><strong>è¯•æƒ³ä»¥ä¸‹åœºæ™¯ï¼š</strong> åœ¨ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåœ¨è¿˜æ²¡æœ‰æäº¤äº‹åŠ¡ä¹‹å‰ï¼Œå¦‚æœ MySQL å‘ç”Ÿäº†å´©æºƒï¼Œè¦æ€ä¹ˆå›æ»šåˆ°äº‹åŠ¡ä¹‹å‰çš„æ•°æ®å‘¢ï¼Ÿ</p><p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å¦‚æœæ¯æ¬¡åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéƒ½è®°å½•ä¸‹å›æ»šæ—¶éœ€è¦çš„ä¿¡æ¯åˆ°ä¸€ä¸ªæ—¥å¿—ï¼ˆundologï¼‰é‡Œï¼Œé‚£ä¹ˆåœ¨äº‹åŠ¡æ‰§è¡Œä¸­é€”å‘ç”Ÿäº† MySQL å´©æºƒåï¼Œå°±ä¸ç”¨æ‹…å¿ƒæ— æ³•å›æ»šåˆ°äº‹åŠ¡ä¹‹å‰çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ—¥å¿—å›æ»šåˆ°äº‹åŠ¡ä¹‹å‰çš„æ•°æ®ã€‚</p><h4 id="_3-2-2-è®¤è¯†-undolog-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_3-2-2-è®¤è¯†-undolog-æœºåˆ¶"><span>3.2.2 è®¤è¯† Undolog æœºåˆ¶</span></a></h4><p>åœ¨äº‹åŠ¡æ²¡æäº¤ä¹‹å‰ï¼ŒMySQL ä¼š<code>å…ˆè®°å½•æ›´æ–°å‰çš„æ•°æ®åˆ° undologæ—¥å¿—æ–‡ä»¶</code>ï¼Œå½“äº‹åŠ¡éœ€è¦å›æ»šæ—¶ï¼Œå¯ä»¥åˆ©ç”¨ <code>undolog</code> æ¥è¿›è¡Œå›æ»šã€‚</p><p>è¿‡ç¨‹å¦‚ä¸‹å›¾: <img src="http://images.kryiea.cn/img/20240601142819.png" alt="20240601142819" loading="lazy"></p><h4 id="_3-2-3-undolog-å¦‚ä½•è®°å½•å’Œå›æ»š" tabindex="-1"><a class="header-anchor" href="#_3-2-3-undolog-å¦‚ä½•è®°å½•å’Œå›æ»š"><span>3.2.3 Undolog å¦‚ä½•è®°å½•å’Œå›æ»š</span></a></h4><p>æ¯å½“ InnoDB å¼•æ“å¯¹ä¸€æ¡è®°å½•è¿›è¡Œæ“ä½œæ—¶ï¼Œè¦æŠŠå›æ»šæ—¶éœ€è¦çš„ä¿¡æ¯éƒ½è®°å½•åˆ° <code>undolog</code> é‡Œï¼Œæ¯”å¦‚ï¼š</p><ol><li>åœ¨ <code>æ’å…¥</code> ä¸€æ¡è®°å½•æ—¶ï¼Œè¦æŠŠè¿™æ¡è®°å½•çš„<strong>ä¸»é”®å€¼</strong>è®°ä¸‹æ¥ï¼Œè¿™æ ·<code>å›æ»š</code>æ—¶åªéœ€è¦æŠŠè¿™ä¸ªä¸»é”®å€¼å¯¹åº”çš„è®°å½• <code>delete</code> å°±å¥½äº†ï¼›</li><li>åœ¨ <code>åˆ é™¤</code> ä¸€æ¡è®°å½•æ—¶ï¼Œè¦æŠŠè¿™æ¡<strong>è®°å½•ä¸­çš„å†…å®¹</strong>éƒ½è®°ä¸‹æ¥ï¼Œè¿™æ ·<code>å›æ»š</code>æ—¶å†æŠŠç”±è¿™äº›å†…å®¹ç»„æˆçš„è®°å½• <code>insert</code> åˆ°è¡¨ä¸­å°±å¥½äº†ï¼›</li><li>åœ¨ <code>æ›´æ–°</code> ä¸€æ¡è®°å½•æ—¶ï¼Œè¦æŠŠ<strong>è¢«æ›´æ–°çš„åˆ—çš„æ—§å€¼</strong>è®°ä¸‹æ¥ï¼Œè¿™æ ·<code>å›æ»š</code>æ—¶å†æŠŠè¿™äº›åˆ—<code> update</code> ä¸ºæ—§å€¼å°±å¥½äº†ã€‚</li></ol><h4 id="_3-2-4-undolog-æ—¥å¿—çš„æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_3-2-4-undolog-æ—¥å¿—çš„æ ¼å¼"><span>3.2.4 Undolog æ—¥å¿—çš„æ ¼å¼</span></a></h4><p><strong>éœ€è¦äº†è§£ä¸€æ¡è®°å½•åœ¨innodbå¼•æ“ä¸­çš„å­˜å‚¨æ ¼å¼ã€‚</strong></p><p>ä¸€æ¡è®°å½•çš„æ¯ä¸€æ¬¡æ›´æ–°æ“ä½œäº§ç”Ÿçš„ <code>undolog</code> ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ª <code>roll_pointer æŒ‡é’ˆ</code>å’Œä¸€ä¸ª <code>trx_id äº‹åŠ¡id</code>ï¼š</p><ul><li>é€šè¿‡ <code>trx_id</code> å¯ä»¥çŸ¥é“è¯¥è®°å½•æ˜¯è¢«å“ªä¸ªäº‹åŠ¡ä¿®æ”¹çš„ã€‚</li><li>é€šè¿‡ <code>roll_pointer</code> æŒ‡é’ˆå¯ä»¥å°†è¿™äº› <code>undolog</code> ä¸²æˆä¸€ä¸ªé“¾è¡¨ï¼Œè¿™ä¸ªé“¾è¡¨å°±è¢«ç§°ä¸º<strong>ç‰ˆæœ¬é“¾</strong>ã€‚</li></ul><p><strong>ç‰ˆæœ¬é“¾å¦‚ä¸‹å›¾ï¼š</strong><img src="http://images.kryiea.cn/img/1.png" alt="1" loading="lazy"></p><h4 id="_3-2-5-undolog-readview-å®ç°-mvcc" tabindex="-1"><a class="header-anchor" href="#_3-2-5-undolog-readview-å®ç°-mvcc"><span>3.2.5 Undolog + ReadView å®ç° MVCC</span></a></h4><p><strong>MVCC - Multi-version concurrency control</strong> å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æ˜¯ä¸€ç§æ•°æ®åº“ç®¡ç†æŠ€æœ¯ï¼Œé€šè¿‡ç»´æŠ¤æ•°æ®çš„å¤šä¸ªç‰ˆæœ¬æ¥å®ç°å¹¶å‘è®¿é—®ï¼Œä»è€Œæé«˜è¯»å†™æ“ä½œçš„æ€§èƒ½å’Œä¸€è‡´æ€§ã€‚</p><p><strong>å¹¶å‘è®¿é—®çš„å¤šä¸ªç‰ˆæœ¬é€šè¿‡å¿«ç…§æ§åˆ¶ï¼š</strong> å¯¹äº<code>è¯»æäº¤</code>å’Œ<code>å¯é‡å¤è¯»</code>éš”ç¦»çº§åˆ«çš„äº‹åŠ¡æ¥è¯´ï¼Œå®ƒä»¬çš„<code>å¿«ç…§è¯»</code>ï¼ˆæ™®é€š <code>select</code> è¯­å¥ï¼‰æ˜¯é€šè¿‡ <code>ReadView + undolog</code> æ¥å®ç°çš„ã€‚ <code>è¯»æäº¤</code> å’Œ <code>å¯é‡å¤è¯»</code> çš„ <code>å¿«ç…§è¯»</code> åŒºåˆ«åœ¨äºåˆ›å»º ReadView çš„æ—¶æœºä¸åŒï¼š</p><ul><li><code>è¯»æäº¤éš”ç¦»çº§åˆ«</code>ï¼š<strong>æ¯æ¬¡æ‰§è¡Œ select éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ ReadView</strong>ï¼Œä¹Ÿæ„å‘³ç€ï¼Œäº‹åŠ¡æœŸé—´çš„å¤šæ¬¡è¯»å–åŒä¸€æ¡æ•°æ®ï¼Œå‰åä¸¤æ¬¡è¯»çš„æ•°æ®å¯èƒ½ä¼šå‡ºç°ä¸ä¸€è‡´ï¼Œå› ä¸ºå¯èƒ½è¿™æœŸé—´å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹äº†è¯¥è®°å½•ï¼Œå¹¶æäº¤äº†äº‹åŠ¡ã€‚</li><li><code>å¯é‡å¤è¯»éš”ç¦»çº§åˆ«</code>ï¼šåœ¨å¯åŠ¨äº‹åŠ¡æ—¶ç”Ÿæˆä¸€ä¸ª ReadViewï¼Œç„¶å<strong>æ•´ä¸ªäº‹åŠ¡æœŸé—´éƒ½åœ¨ç”¨è¿™ä¸ª ReadView</strong>ï¼Œè¿™æ ·å°±ä¿è¯äº†åœ¨äº‹åŠ¡æœŸé—´è¯»åˆ°çš„æ•°æ®éƒ½æ˜¯äº‹åŠ¡å¯åŠ¨å‰çš„è®°å½•ã€‚</li></ul><p><strong>å¦‚ä½•çŸ¥é“ç‰ˆæœ¬çš„å¯è§æ€§ï¼Œå‚è€ƒ <code>3.2.6</code> ï¼š</strong> é€šè¿‡ <code>äº‹åŠ¡çš„ ReadView é‡Œçš„å­—æ®µ </code>å’Œ <code>è®°å½•ä¸­çš„ä¸¤ä¸ªéšè—åˆ— trx_id å’Œ roll_pointer</code> çš„æ¯”å¯¹ï¼Œå¦‚æœä¸æ»¡è¶³å¯è§è¡Œï¼Œå°±ä¼šé¡ºç€ <code>undolog ç‰ˆæœ¬é“¾</code>é‡Œæ‰¾åˆ°æ»¡è¶³å…¶å¯è§æ€§çš„è®°å½•ï¼Œä»è€Œæ§åˆ¶å¹¶å‘äº‹åŠ¡è®¿é—®åŒä¸€ä¸ªè®°å½•æ—¶çš„è¡Œä¸ºï¼Œè¿™å°±å« MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰</p><h4 id="_3-2-6-readview-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_3-2-6-readview-æœºåˆ¶"><span>3.2.6 ReadView æœºåˆ¶</span></a></h4><p><strong>ReadView çš„å››ä¸ªå­—æ®µï¼š</strong><img src="http://images.kryiea.cn/img/20240601154137.png" alt="20240601154137" loading="lazy"> ReadView å¯ä»¥ç†è§£ä¸ºè®°å½•<code>å½“å‰äº‹åŠ¡id</code>åˆ›å»ºæ—¶ï¼Œæ•´ä¸ªæ•°æ®åº“è¿˜æœ‰å“ªäº›å…¶ä»–æ´»ç€çš„äº‹åŠ¡ï¼Œè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿äºåˆ¤æ–­æ•°æ®çš„å¯è§æ€§ã€‚</p><ul><li><code>creator_trx_id</code>ï¼šä»£è¡¨åˆ›å»ºå½“å‰è¿™ä¸ª ReadView çš„äº‹åŠ¡IDã€‚</li><li><code>m_ids</code>ï¼šè¡¨ç¤ºåœ¨ç”Ÿæˆå½“å‰ ReadView æ—¶ï¼Œç³»ç»Ÿå†…æ´»è·ƒä¸”æœªæäº¤çš„äº‹åŠ¡IDåˆ—è¡¨ã€‚</li><li><code>min_trx_id</code>ï¼šæ´»è·ƒçš„äº‹åŠ¡åˆ—è¡¨ä¸­æœ€å°çš„äº‹åŠ¡IDã€‚</li><li><code>max_trx_id</code>ï¼šè¡¨ç¤ºåœ¨ç”Ÿæˆå½“å‰ ReadView æ—¶ï¼Œç³»ç»Ÿä¸­è¦ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡åˆ†é…çš„IDå€¼</li></ul><p><strong>å¦‚ä½•åˆ¤æ–­å¯è§æ€§ï¼š</strong> åˆ¤å®šæ–¹æ³•ï¼š<code>äº‹åŠ¡ readview é‡Œçš„å­—æ®µ</code> ä¸ <code>è®°å½•ä¸­çš„ä¸¤ä¸ªéšè—åˆ—</code> è¿›è¡Œå¯¹æ¯”ï¼š</p><ul><li>å¦‚æœ<code>äº‹åŠ¡ReadView ä¸­çš„ min_trx_id å€¼</code> <strong>&gt;=</strong> <code>è®°å½•çš„ trx_id å€¼</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬çš„è®°å½•æ˜¯åœ¨åˆ›å»º ReadView å‰ å·²ç»æäº¤çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡ <strong>å¯è§</strong> ã€‚</li><li>å¦‚æœ<code>äº‹åŠ¡ReadView ä¸­çš„ max_trx_id å€¼</code> <strong>&lt;=</strong> <code>è®°å½•çš„ trx_id å€¼</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬çš„è®°å½•æ˜¯åœ¨åˆ›å»º ReadView å æ‰å¯åŠ¨çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡ <strong>ä¸å¯è§</strong> ã€‚</li><li>å¦‚æœ <code>äº‹åŠ¡ReadView ä¸­çš„ min_trx_id</code> <strong>&lt;</strong> <code>è®°å½•çš„ trx_id å€¼</code> <strong>&lt;</strong> <code>äº‹åŠ¡ReadView ä¸­çš„ max_trx_id</code>ï¼Œéœ€è¦åˆ¤æ–­ <code>trx_id</code> æ˜¯å¦åœ¨ <code>m_ids</code> åˆ—è¡¨ä¸­ï¼š <ul><li>å¦‚æœ<code>è®°å½•çš„ trx_id</code> åœ¨ <code>m_ids</code> åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆè¯¥ç‰ˆæœ¬è®°å½•çš„æ´»è·ƒäº‹åŠ¡ä¾ç„¶æ´»è·ƒç€ï¼ˆè¿˜æ²¡æäº¤äº‹åŠ¡ï¼‰ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡ <strong>ä¸å¯è§</strong> ã€‚</li><li>å¦‚æœ<code>è®°å½•çš„ trx_id</code> ä¸åœ¨ <code>m_ids</code> åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆè¯¥ç‰ˆæœ¬è®°å½•çš„æ´»è·ƒäº‹åŠ¡å·²ç»è¢«æäº¤ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡ <strong>å¯è§</strong> ã€‚</li></ul></li></ul><h4 id="_3-2-7-undolog-å¦‚ä½•åˆ·ç›˜çš„" tabindex="-1"><a class="header-anchor" href="#_3-2-7-undolog-å¦‚ä½•åˆ·ç›˜çš„"><span>3.2.7 UndoLog å¦‚ä½•åˆ·ç›˜çš„</span></a></h4><ul><li><code>Undolog</code> å’Œ <code>æ•°æ®é¡µ</code> çš„åˆ·ç›˜ç­–ç•¥æ˜¯ä¸€æ ·çš„ï¼Œéƒ½éœ€è¦<strong>é€šè¿‡ Redolog ä¿è¯æŒä¹…åŒ–</strong>ã€‚</li><li><code>Buffer pool</code> ä¸­æœ‰ <code>Undo é¡µ</code>ï¼Œå¯¹ <code>Undo é¡µ</code>çš„ä¿®æ”¹ä¹Ÿéƒ½ä¼š<strong>è®°å½•åˆ° Redolog</strong>ã€‚</li><li><code>Redolog</code> ä¼šæ¯ç§’åˆ·ç›˜ï¼Œæäº¤äº‹åŠ¡æ—¶ä¹Ÿä¼šåˆ·ç›˜ï¼Œ<code>æ•°æ®é¡µ</code>å’Œ <code>Undo é¡µ</code>éƒ½æ˜¯é è¿™ä¸ªæœºåˆ¶ä¿è¯æŒä¹…åŒ–çš„ã€‚</li></ul><h3 id="_3-3-buffer-pool-ç¼“å†²æ± " tabindex="-1"><a class="header-anchor" href="#_3-3-buffer-pool-ç¼“å†²æ± "><span>3.3 Buffer Pool ç¼“å†²æ± </span></a></h3><h4 id="_3-3-1-buffer-pool-çš„æ„ä¹‰" tabindex="-1"><a class="header-anchor" href="#_3-3-1-buffer-pool-çš„æ„ä¹‰"><span>3.3.1 Buffer Pool çš„æ„ä¹‰</span></a></h4><p><strong>åœºæ™¯ï¼š</strong> MySQL çš„æ•°æ®éƒ½æ˜¯å­˜åœ¨ç£ç›˜ä¸­çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¾—å…ˆè¦ä»ç£ç›˜è¯»å–è¯¥è®°å½•ï¼Œç„¶ååœ¨<strong>å†…å­˜ä¸­</strong>ä¿®æ”¹è¿™æ¡è®°å½•ã€‚</p><p><strong>é‚£ä¿®æ”¹å®Œè¿™æ¡è®°å½•æ˜¯é€‰æ‹©ç›´æ¥å†™å›åˆ°ç£ç›˜ï¼Œè¿˜æ˜¯é€‰æ‹©ç¼“å­˜èµ·æ¥å‘¢ï¼š</strong> è¿™ä¹Ÿæ˜¯<code> Buffer Pool</code> çš„æ„ä¹‰ã€‚ å½“ç„¶æ˜¯ç¼“å­˜èµ·æ¥å¥½ï¼Œè¿™æ ·ä¸‹æ¬¡æœ‰æŸ¥è¯¢è¯­å¥å‘½ä¸­äº†è¿™æ¡è®°å½•ï¼Œç›´æ¥è¯»å–ç¼“å­˜ä¸­çš„è®°å½•ï¼Œå°±ä¸éœ€è¦ä»ç£ç›˜è·å–æ•°æ®äº†ã€‚</p><p><strong>æœ‰äº†Buffer Poolåï¼š</strong></p><ul><li>å½“è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å­˜åœ¨äº <code>BufferPool</code> ä¸­ï¼Œå®¢æˆ·ç«¯å°±ä¼šç›´æ¥è¯»å– <code>BufferPool</code> ä¸­çš„æ•°æ®ï¼Œå¦åˆ™å†å»ç£ç›˜ä¸­è¯»å–ã€‚</li><li>å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å­˜åœ¨äº <code>Buffe Pool</code> ä¸­ï¼Œé‚£ç›´æ¥ä¿®æ”¹ <code>BufferPool</code> ä¸­æ•°æ®æ‰€åœ¨çš„é¡µï¼Œç„¶åå°†å…¶é¡µè®¾ç½®ä¸ºè„é¡µï¼ˆè¯¥é¡µçš„å†…å­˜æ•°æ®å’Œç£ç›˜ä¸Šçš„æ•°æ®å·²ç»ä¸ä¸€è‡´ï¼‰ï¼Œä¸ºäº†å‡å°‘ç£ç›˜<code>I/O</code>ï¼Œä¸ä¼šç«‹å³å°†è„é¡µå†™å…¥ç£ç›˜ï¼Œåç»­ç”±åå°çº¿ç¨‹é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ—¶æœºå°†è„é¡µå†™å…¥åˆ°ç£ç›˜ã€‚</li></ul><p><strong>Buffer Pool å±äºå“ªä¸€å±‚ï¼š</strong> å±äºï¼šInnodbå¼•æ“å±‚ã€‚ åŒºåˆ«ï¼šä¸æ˜¯æœ¬æ–‡å¼€å¤´è®¨è®º <code>select</code> è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­æåˆ°çš„ç¼“å­˜ï¼Œé‚£ä¸ªæ˜¯åœ¨ server å±‚çš„ã€‚</p><h4 id="_3-3-2-buffer-pool-ç¼“å­˜ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_3-3-2-buffer-pool-ç¼“å­˜ä»€ä¹ˆ"><span>3.3.2 Buffer Pool ç¼“å­˜ä»€ä¹ˆ</span></a></h4><p><strong>InnoDBä¸­ç£ç›˜ä¸å†…å­˜çš„äº¤äº’åŸºæœ¬å•ä½ï¼š</strong> InnoDB ä¼šæŠŠå­˜å‚¨çš„æ•°æ®åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ª<code>é¡µ</code>ï¼Œä»¥<strong>é¡µä½œä¸ºç£ç›˜å’Œå†…å­˜äº¤äº’çš„åŸºæœ¬å•ä½</strong>ï¼Œä¸€ä¸ªé¡µçš„é»˜è®¤å¤§å°ä¸º <code>16KB</code>ã€‚å› æ­¤ï¼Œ<code>BufferPool</code> åŒæ ·éœ€è¦æŒ‰é¡µæ¥åˆ’åˆ†ï¼Œä½¿ç”¨ä¸å­˜å‚¨å¼•æ“ä¸€æ ·çš„åŸºæœ¬å•ä½ã€‚</p><p><strong>åœ¨ MySQL å¯åŠ¨çš„æ—¶å€™ï¼š</strong> InnoDB ä¼šä¸º BufferPool ç”³è¯·ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç„¶åæŒ‰ç…§é»˜è®¤çš„ <code>16KB</code> çš„å¤§å°åˆ’åˆ†å‡ºä¸€ä¸ªä¸ªçš„é¡µï¼Œ BufferPool ä¸­çš„é¡µå°±å«åš<strong>ç¼“å­˜é¡µ</strong>ã€‚ æ­¤æ—¶è¿™äº›ç¼“å­˜é¡µéƒ½æ˜¯ç©ºé—²çš„ï¼Œä¹‹åéšç€ç¨‹åºçš„è¿è¡Œï¼Œä¼šæœ‰ç£ç›˜ä¸Šçš„é¡µè¢«åŠ è½½ç¼“å­˜åˆ° BufferPool ä¸­çš„ç¼“å­˜é¡µã€‚</p><p><strong>åœ¨ MySQL å¯åŠ¨å®Œæˆçš„æ—¶å€™ï¼š</strong> ç”±äºæ˜¯å…ˆç”³è¯·äº†ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ä½†æ²¡å†™å…¥å…·ä½“æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥è§‚å¯Ÿåˆ°ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜ç©ºé—´å¾ˆå¤§ï¼Œè€Œä½¿ç”¨åˆ°çš„ç‰©ç†å†…å­˜ç©ºé—´å´å¾ˆå°ã€‚ è¿™æ˜¯å› ä¸ºåªæœ‰è¿™äº›è™šæ‹Ÿå†…å­˜è¢«è®¿é—®åï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šè§¦å‘<code>ç¼ºé¡µä¸­æ–­</code>ï¼Œç”³è¯·ç‰©ç†å†…å­˜ï¼Œæ¥ç€å°†è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€å»ºç«‹æ˜ å°„å…³ç³»ã€‚</p><p><strong>BufferPool å¯ä»¥ç¼“å­˜çš„æ•°æ®ç±»å‹ï¼š</strong><img src="http://images.kryiea.cn/img/mysql-BufferPool.drawio.png" alt="mysql-BufferPool.drawio" loading="lazy"></p><p><strong>Undo é¡µæ˜¯è®°å½•ä»€ä¹ˆçš„</strong> å¼€å¯äº‹åŠ¡åï¼ŒInnoDB ä¼šåœ¨<strong>æ›´æ–°è®°å½•ä¹‹å‰</strong>ï¼Œå…ˆè®°å½•ç›¸åº”æ“ä½œçš„ <code>undolog</code> æ¥ä¿è¯äº‹åŠ¡çš„<strong>åŸå­æ€§</strong>ã€‚</p><p>æ¯”å¦‚ï¼šå¦‚æœæ˜¯ <code>update</code> æ“ä½œï¼Œéœ€è¦æŠŠè¢«æ›´æ–°çš„åˆ—çš„æ—§å€¼è®°ä¸‹æ¥ï¼Œæ—§å€¼ä½œä¸ºä¸€æ¡ <code>undolog</code>ï¼Œç„¶åæŠŠè¿™æ¡ <code>undolog</code> å†™å…¥ <code>BufferPool</code> ä¸­çš„ <code>Undoé¡µ</code></p><p><strong>æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œåªéœ€è¦ç¼“å­˜ä¸€æ¡è®°å½•å—ï¼Ÿ</strong> åˆšåˆšæåˆ°äº† InnoDB å­˜å‚¨å¼•æ“ä»¥<code>16KBå¤§å°çš„é¡µ</code>ä½œä¸ºç£ç›˜ä¸å†…å­˜äº¤äº’çš„åŸºæœ¬å•ä½ï¼Œæ‰€ä»¥æŸ¥è¯¢ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œä¼šå°†æ•´ä¸ªé¡µåŠ è½½è¿› BufferPool ä¸­ï¼Œå†é€šè¿‡é¡µçš„<code>é¡µç›®å½•</code>å»å®šä½åˆ°æŸæ¡å…·ä½“çš„è®°å½•.</p><p><strong>ä¸Šé¢æåˆ°çš„ é¡µç›®å½• æ˜¯ä»€ä¹ˆï¼Ÿ</strong> ç®€å•æ¥è¯´ï¼š<code>é¡µç›®å½•</code>ç±»ä¼¼äº<code>å­—å…¸çš„ç›®å½•</code>ï¼Œç”¨äºå¿«é€Ÿå®šä½æŸæ¡è®°å½•çš„å¤§è‡´ä½ç½®ã€‚</p><p>è¿™ä¸ªé—®é¢˜éœ€è¦äº†è§£ä¸€ä¸ª <code>é¡µ</code> å†…éƒ¨æ˜¯å¦‚ä½•ç»„ç»‡æ•°æ®çš„ã€‚å°æ—å›¾è§£ä¹Ÿæœ‰æåˆ°ï¼Œè¿™é‡Œé™„ä¸Šä¸€å¼ æ›´å…·ä½“çš„å›¾æ¥è¾…åŠ©ç†è§£ã€‚</p><ul><li>ä¸€ä¸ªé¡µç©ºé—´ä¼šè¢«åˆ’åˆ†æˆè®¸å¤šéƒ¨åˆ†ï¼Œæœ‰ï¼š<code>æ–‡ä»¶å¤´ã€é¡µå¤´ã€æœ€å¤§æœ€å°è®°å½•ã€ç”¨æˆ·è®°å½•ã€ç©ºé—²ç©ºé—´ã€æ–‡ä»¶å°¾</code>ç­‰ã€‚</li><li>ä¸»è¦å…³æ³¨<code>ç”¨æˆ·è®°å½•</code>ï¼šå­˜å‚¨çš„ä¸€è¡Œè¡Œè®°å½•ä¼šè¢«å­˜æ”¾åœ¨è¿™é‡Œï¼Œè®°å½•è¿˜ä¼šè¿›ä¸€æ­¥è¢«åˆ†æˆä¸€ä¸ªä¸ª<code>ç»„</code>ï¼Œæ¯ä¸€ä¸ªç»„å†…éƒ¨éƒ½æœ‰ä¸€äº›æ•°æ®è®°å½•ã€‚</li><li>å†çœ‹åˆ°å·¦è¾¹çš„<code>é¡µç›®å½•</code>ï¼šæœ‰ä¸€ä¸ªä¸ªçš„<code>æ§½ä½</code>ï¼Œå…¶æŒ‡å‘æ¯ä¸€ä¸ªåˆ†ç»„å†…çš„æœ€åä¸€æ¡è®°å½•ã€‚</li></ul><figure><img src="http://images.kryiea.cn/img/mysql-4.drawio.png" alt="mysql-4.drawio" tabindex="0" loading="lazy"><figcaption>mysql-4.drawio</figcaption></figure><h4 id="_3-3-3-buffer-pool-åˆ·ç›˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_3-3-3-buffer-pool-åˆ·ç›˜ç­–ç•¥"><span>3.3.3 Buffer Pool åˆ·ç›˜ç­–ç•¥</span></a></h4><p><strong>æ·±å…¥å­¦ä¹ æ–‡ç« æ¨èï¼š</strong><a href="https://juejin.cn/post/7159071309354254373?searchId=202406022326056D88E4CF0875DE59F736#heading-7" target="_blank" rel="noopener noreferrer">(åäºŒ)MySQLä¹‹å†…å­˜ç¯‡ï¼šæ·±å…¥æ¢å¯»æ•°æ®åº“å†…å­˜ä¸Buffer Poolçš„å¥¥å¦™ï¼ - ç«¹å­çˆ±ç†ŠçŒ«</a></p><h3 id="_3-4-redolog-é‡åšæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_3-4-redolog-é‡åšæ—¥å¿—"><span>3.4 RedoLog é‡åšæ—¥å¿—</span></a></h3><h4 id="_3-4-1-ä¸ºä»€ä¹ˆéœ€è¦-redolog" tabindex="-1"><a class="header-anchor" href="#_3-4-1-ä¸ºä»€ä¹ˆéœ€è¦-redolog"><span>3.4.1 ä¸ºä»€ä¹ˆéœ€è¦ Redolog</span></a></h4><p><strong>è¯•æƒ³ä»¥ä¸‹åœºæ™¯ï¼š</strong> Buffer Pool æ˜¯åŸºäºå†…å­˜çš„ï¼Œè€Œå†…å­˜æ€»æ˜¯ä¸å¯é ï¼Œä¸‡ä¸€æ–­ç”µé‡å¯ï¼Œè¿˜æ²¡æ¥å¾—åŠè½ç›˜çš„è„é¡µæ•°æ®å°±ä¼šä¸¢å¤±ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> é‡‡ç”¨ <code>WAL (Write-Ahead Logging)</code> æŠ€æœ¯ã€‚</p><ul><li>MySQL çš„å†™æ“ä½œå¹¶ä¸æ˜¯ç«‹åˆ»å†™åˆ°ç£ç›˜ä¸Šï¼Œè€Œæ˜¯å…ˆå†™æ—¥å¿—æ–‡ä»¶ï¼Œç„¶ååœ¨åˆé€‚çš„æ—¶é—´å†å°†æ–°çš„è®°å½•å†™åˆ°ç£ç›˜ä¸Šã€‚</li><li>åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿåªéœ€ç¡®ä¿ redolog å·²ç»å†™å…¥ç£ç›˜ï¼Œè€Œæ•°æ®é¡µå¯ä»¥ç¨åå†å†™å…¥ã€‚</li></ul><p><strong>è§£å†³æ–¹æ¡ˆçš„åœºæ™¯ï¼š</strong> å½“æœ‰ä¸€æ¡è®°å½•éœ€è¦æ›´æ–°çš„æ—¶å€™ï¼ŒInnoDB å¼•æ“ä¼šå…ˆæ›´æ–° <code>Buffer Pool</code> ä¸­çš„æ•°æ®é¡µï¼ŒåŒæ—¶å°†è¯¥é¡µæ ‡è®°ä¸º<code>è„é¡µ</code>ã€‚ç„¶åï¼Œå°†æœ¬æ¬¡å¯¹<code>è¿™ä¸ªé¡µä¿®æ”¹åçš„æ•°æ®çŠ¶æ€</code>ä»¥ <code>redo log</code> çš„å½¢å¼è®°å½•ä¸‹æ¥å¹¶å†™å…¥ <code>redo log</code> æ–‡ä»¶ï¼Œè¿™æ—¶æ›´æ–°æ“ä½œå°±ç®—å®Œæˆäº†ã€‚</p><p>åˆ°è¿™é‡Œï¼Œåªæ˜¯å®Œæˆäº† <code>redo log</code> æ–‡ä»¶çš„åˆ·ç›˜ï¼Œä½†è¿˜æœªå®Œæˆå°†<strong>æœ€æ–°çš„æ•°æ®è®°å½•</strong>ï¼ˆè„çš„æ•°æ®é¡µï¼‰åˆ·ç›˜åˆ°å­˜å‚¨è¡¨æ•°æ®çš„æ–‡ä»¶ <code>xxx.ibd</code> ä¸­ã€‚ç®€è€Œè¨€ä¹‹ï¼šæ—¥å¿—æ–‡ä»¶æ˜¯æœ€æ–°çš„ï¼Œä½†æ•°æ®åº“æ–‡ä»¶è¿˜ä¸æ˜¯æœ€æ–°çš„ï¼Œè¿˜éœ€è¦å®Œæˆæœ€åçš„ <code>Buffer Pool --&gt; ç£ç›˜</code> æ“ä½œï¼Œæ‰èƒ½å®ŒæˆæŒä¹…åŒ–å­˜å‚¨ã€‚</p><p>åç»­ï¼ŒInnoDB å¼•æ“ä¼šåœ¨é€‚å½“çš„æ—¶å€™ï¼Œç”±<code>åå°çº¿ç¨‹</code>å°†ç¼“å­˜åœ¨ <code>Buffer Pool</code> çš„è„é¡µåˆ·æ–°åˆ°ç£ç›˜é‡Œï¼Œè¿™å°±æ˜¯ WAL çš„æ ¸å¿ƒæ€æƒ³ã€‚</p><p><strong>å›¾ç¤ºï¼Œç¬¬4æ­¥çš„ç»†èŠ‚å‚è€ƒ <code>3.4.5</code>ï¼š</strong><img src="http://images.kryiea.cn/img/mysql-1WAL.drawio.png" alt="mysql-1WAL.drawio" loading="lazy"></p><h4 id="_3-4-2-è®¤è¯†-redolog-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_3-4-2-è®¤è¯†-redolog-æœºåˆ¶"><span>3.4.2 è®¤è¯† Redolog æœºåˆ¶</span></a></h4><p>redolog æ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•äº†æŸä¸ªæ•°æ®é¡µåšäº†ä»€ä¹ˆä¿®æ”¹</p><p><strong>å¦‚ä½•è®°å½•è¿™ä¸ª &quot;ä¿®æ”¹&quot;ï¼š</strong> æ ¼å¼ï¼š<code>AAAè¡¨ç©ºé—´ ä¸­çš„ BBBæ•°æ®é¡µ çš„ CCCåç§»é‡ çš„åœ°æ–¹åšäº† DDDçš„æ›´æ–°</code>ï¼Œæ¯å½“æ‰§è¡Œä¸€ä¸ªäº‹åŠ¡å°±ä¼šäº§ç”Ÿè¿™æ ·çš„ä¸€æ¡æˆ–è€…å¤šæ¡ç‰©ç†æ—¥å¿—ã€‚</p><p><strong>WALï¼š</strong> åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œåªè¦å…ˆå°† redo log æŒä¹…åŒ–åˆ°ç£ç›˜å³å¯ï¼Œå¯ä»¥ä¸éœ€è¦ç­‰åˆ°å°†ç¼“å­˜åœ¨ Buffer Pool é‡Œçš„è„é¡µæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</p><p><strong>å¦‚ä½•ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼š</strong> å½“ç³»ç»Ÿå´©æºƒæ—¶ï¼Œè™½ç„¶è„é¡µæ•°æ®æ²¡æœ‰æŒä¹…åŒ–ï¼Œä½†æ˜¯ redolog å·²ç»æŒä¹…åŒ–ï¼ŒMySQL èƒ½åœ¨é‡å¯åæ ¹æ® redolog çš„æ—¥å¿—å†…å®¹ï¼Œå°†æ‰€æœ‰æ•°æ®æ¢å¤åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚</p><h4 id="_3-4-3-redolog-ä¸-undolog-çš„é…åˆ" tabindex="-1"><a class="header-anchor" href="#_3-4-3-redolog-ä¸-undolog-çš„é…åˆ"><span>3.4.3 Redolog ä¸ Undolog çš„é…åˆ</span></a></h4><p><strong>é…åˆåœºæ™¯ï¼š</strong> å¼€å¯äº‹åŠ¡åï¼ŒInnoDB åœ¨è¿›è¡Œæ›´æ–°æ“ä½œä¹‹å‰ï¼Œé¦–å…ˆä¼šè®°å½•ç›¸åº”çš„ undologã€‚</p><p>å¦‚æœæ˜¯æ›´æ–°æ“ä½œï¼ŒInnoDB éœ€è¦å°†è¢«æ›´æ–°çš„åˆ—çš„æ—§å€¼è®°ä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆä¸€æ¡ undologã€‚è¿™ä¸ª undolog ä¼šè¢«å†™å…¥ Buffer Pool ä¸­çš„ Undo é¡µé¢ã€‚ ç„¶ååœ¨ BufferPool ä¸­å®Œæˆæ•°æ®é¡µçš„æ›´æ–°ï¼Œæ ‡è®°è¯¥é¡µä¸ºè„é¡µï¼Œå¹¶ä¸”è®°å½•å¯¹äºçš„ redologã€‚</p><p><strong>å…·ä½“çš„é…åˆè¿‡ç¨‹ï¼š</strong></p><ol><li><strong>è®°å½• undologï¼š</strong></li></ol><ul><li>å½“äº‹åŠ¡å¯¹æ•°æ®åº“ä¸­çš„è®°å½•è¿›è¡Œæ›´æ–°æ—¶ï¼ŒInnoDB ä¼šå…ˆç”Ÿæˆä¸€æ¡ <code>undolog</code>ï¼Œè®°å½•è¢«ä¿®æ”¹å‰çš„æ•°æ®ã€‚è¿™ä¸ªæ“ä½œæ˜¯ä¸ºäº†ä¿è¯åœ¨äº‹åŠ¡å›æ»šæ—¶èƒ½å¤Ÿæ¢å¤åˆ°åŸå§‹çŠ¶æ€ã€‚</li><li>ç”Ÿæˆçš„ undolog ä¼šè¢«å†™å…¥ BufferPool ä¸­çš„ <code>Undo é¡µé¢</code>ï¼Œå¹¶åœ¨å†…å­˜ä¸­è¿›è¡Œä¿®æ”¹ã€‚</li></ul><ol start="2"><li><strong>è®°å½• redologï¼š</strong></li></ol><ul><li>åœ¨å†…å­˜ä¸­ä¿®æ”¹ <code>Undo é¡µé¢</code>åï¼ŒInnoDB è¿˜éœ€è¦è®°å½•å¯¹åº”çš„ <code>redo log</code>ã€‚<code>redo log</code> è®°å½•çš„æ˜¯å¯¹æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹æ“ä½œï¼Œæ˜¯ç”¨æ¥åœ¨ç³»ç»Ÿå´©æºƒåè¿›è¡Œæ•°æ®æ¢å¤çš„ã€‚</li><li>å…·ä½“æ¥è¯´ï¼Œ<code>redo log</code> ä¼šè®°å½•å¯¹æ•°æ®é¡µçš„ä¿®æ”¹æ“ä½œç»†èŠ‚ï¼ŒåŒ…æ‹¬ä½•æ—¶ä¿®æ”¹ã€ä¿®æ”¹äº†å“ªäº›æ•°æ®ç­‰ã€‚è¿™äº›ä¿¡æ¯ä¼šå…ˆå†™å…¥ <code>redolog buffer</code> ä¸­ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶æœºï¼ˆä¾‹å¦‚äº‹åŠ¡æäº¤æ—¶ï¼‰åˆ·å†™åˆ°ç£ç›˜ä¸Šçš„ <code>redo log</code> æ–‡ä»¶ä¸­ã€‚</li></ul><p><strong>Redolog Buffer ä¸ Buffer Pool</strong> ä¸ä¸€æ ·! Redolog Buffer æ˜¯ redolog è‡ªå·±çš„ç¼“å­˜ å…·ä½“ç»†èŠ‚å¾€ä¸‹çœ‹ã€‚</p><h4 id="_3-4-4-redologä¸æ•°æ®åˆ†å¼€å†™å…¥ç£ç›˜çš„å¿…è¦æ€§" tabindex="-1"><a class="header-anchor" href="#_3-4-4-redologä¸æ•°æ®åˆ†å¼€å†™å…¥ç£ç›˜çš„å¿…è¦æ€§"><span>3.4.4 Redologä¸æ•°æ®åˆ†å¼€å†™å…¥ç£ç›˜çš„å¿…è¦æ€§</span></a></h4><p><strong>èƒ½æé«˜æ•°æ®åº“çš„å†™æ€§èƒ½ï¼š</strong></p><ul><li><strong>é¡ºåºå†™å…¥ï¼š</strong><ul><li><code>redo log</code> çš„å†™å…¥æ˜¯é¡ºåºå†™å…¥ï¼Œé‡‡ç”¨åœ¨æ–‡ä»¶å°¾éƒ¨è¿½åŠ å†™å…¥æ–‡ä»¶çš„æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç£ç›˜çš„å¯»é“æ—¶é—´å’Œæ—‹è½¬å»¶è¿Ÿï¼Œä»è€Œæé«˜å†™å…¥é€Ÿåº¦ã€‚</li><li>é¡ºåºå†™å…¥çš„æ€§èƒ½é€šå¸¸æ¯”éšæœºå†™å…¥é«˜</li></ul></li><li><strong>éšæœºå†™å…¥ï¼š</strong><ul><li><code>æ•°æ®é¡µ</code>çš„å†™å…¥é€šå¸¸æ˜¯éšæœºå†™å…¥ã€‚éšæœºå†™å…¥æ˜¯æŒ‡æ•°æ®å†™å…¥ç£ç›˜çš„ä¸åŒä½ç½®ï¼Œå†™å…¥é€Ÿåº¦è¾ƒæ…¢ã€‚</li><li>é€šè¿‡å°†<code>æ•°æ®é¡µ</code>é¦–å…ˆå†™å…¥ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰ï¼Œç„¶ååœ¨é€‚å½“æ—¶æœºæ‰¹é‡å†™å…¥ç£ç›˜ï¼Œå¯ä»¥å‡å°‘éšæœºå†™å…¥çš„é¢‘ç‡å’Œæ¬¡æ•°ã€‚</li></ul></li></ul><h4 id="_3-4-5-redolog-çš„åˆ·ç›˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_3-4-5-redolog-çš„åˆ·ç›˜ç­–ç•¥"><span>3.4.5 Redolog çš„åˆ·ç›˜ç­–ç•¥</span></a></h4><p>æ‰§è¡Œä¸€ä¸ªäº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿçš„ <code>redo log</code> ä¹Ÿä¸æ˜¯ç›´æ¥å†™å…¥ç£ç›˜çš„ï¼Œå› ä¸ºè¿™æ ·ä¼šäº§ç”Ÿå¤§é‡çš„ <code>I/O</code> æ“ä½œï¼Œè€Œä¸”ç£ç›˜çš„è¿è¡Œé€Ÿåº¦è¿œæ…¢äºå†…å­˜ã€‚ æ‰€ä»¥ï¼Œ<code>redo log</code> ä¹Ÿæœ‰è‡ªå·±çš„ç¼“å­˜ <code>redo log buffer</code> ï¼Œæ¯å½“äº§ç”Ÿä¸€æ¡ <code>redo log</code> æ—¶ï¼Œä¼šå…ˆå†™å…¥åˆ° <code>redo log buffer</code>ï¼Œåç»­å†æŒä¹…åŒ–åˆ°ç£ç›˜.</p><p><code>redo log buffer</code> é»˜è®¤å¤§å° <code>16 MB</code>ï¼Œå¯ä»¥é€šè¿‡ <code>innodb_log_Buffer_size</code> å‚æ•°åŠ¨æ€çš„è°ƒæ•´å¤§å°ï¼Œå¢å¤§å®ƒçš„å¤§å°å¯ä»¥è®© MySQL å¤„ç†å¤§äº‹åŠ¡æ—¶ä¸å¿…å†™å…¥ç£ç›˜ï¼ˆæé«˜äº†å†™å…¥ç£ç›˜çš„é˜ˆå€¼ï¼‰ï¼Œè¿›è€Œæå‡å†™ <code>IO</code> æ€§èƒ½ã€‚</p><p><code>redo log buffer</code> çš„æŒä¹…åŒ–å¦‚ä¸‹å›¾ï¼š <img src="http://images.kryiea.cn/img/20240602172013.png" alt="20240602172013" loading="lazy"></p><h4 id="_3-4-6-redolog-buffer-çš„åˆ·ç›˜æ—¶æœº" tabindex="-1"><a class="header-anchor" href="#_3-4-6-redolog-buffer-çš„åˆ·ç›˜æ—¶æœº"><span>3.4.6 redolog buffer çš„åˆ·ç›˜æ—¶æœºï¼š</span></a></h4><p><strong>ä¸»è¦çš„å‡ ä¸ªåˆ·ç›˜æ—¶æœºï¼š</strong></p><ol><li>MySQL æ­£å¸¸å…³é—­æ—¶ã€‚</li><li>å½“ <code>redo log buffer</code> ä¸­è®°å½•çš„å†™å…¥é‡<code>å¤§äº redo log buffer å†…å­˜ç©ºé—´çš„ä¸€åŠ</code>æ—¶ï¼Œä¼šè§¦å‘è½ç›˜ã€‚</li><li>InnoDB çš„<code>åå°çº¿ç¨‹æ¯éš” 1 ç§’</code>ï¼Œå°† <code>redo log buffer</code> æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</li><li><code>æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶</code>éƒ½å°†ç¼“å­˜åœ¨ <code>redo log buffer</code> é‡Œçš„ <code>redo log</code> ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ˆè¿™ä¸ªç­–ç•¥å¯ç”± <code>innodb_flush_log_at_trx_commit</code> å‚æ•°æ§åˆ¶ï¼‰ã€‚</li></ol><p><strong>äº†è§£ä¸€ä¸ªä¸»è¦å‚æ•° <code>innodb_flush_log_at_trx_commit</code>:</strong></p><ul><li><code>innodb_flush_log_at_trx_commit = 0</code> æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ ï¼Œè¿˜æ˜¯å°† <code>redo log</code> ç•™åœ¨ <code>redo log buffer</code> ä¸­ ï¼Œè¯¥æ¨¡å¼ä¸‹åœ¨äº‹åŠ¡æäº¤æ—¶ä¸ä¼šä¸»åŠ¨è§¦å‘å†™å…¥ç£ç›˜çš„æ“ä½œã€‚</li><li><code>innodb_flush_log_at_trx_commit = 1</code> è¿™æ˜¯é»˜è®¤å€¼ã€‚ æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ï¼Œéƒ½ å°†ç¼“å­˜åœ¨ <code>redo log buffer</code> é‡Œçš„ <code>redo log</code> ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ MySQL å¼‚å¸¸é‡å¯ä¹‹åæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</li><li><code>innodb_flush_log_at_trx_commit = 2</code> æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ï¼Œéƒ½åªæ˜¯ç¼“å­˜åœ¨ <code>redo log buffer</code> é‡Œçš„ <code>redo log</code> å†™åˆ° <code>redo log æ–‡ä»¶</code>ï¼Œæ³¨æ„å¹¶ä¸æ„å‘³ç€å†™å…¥åˆ°äº†ç£ç›˜ ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰ä¸ª <code>Page Cache</code>ï¼ˆPage Cache æ˜¯ä¸“é—¨ç”¨æ¥ç¼“å­˜æ–‡ä»¶æ•°æ®çš„ï¼Œæ‰€ä»¥å†™å…¥ <code>redo logæ–‡ä»¶</code>æ„å‘³ç€å†™å…¥åˆ°äº†æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç¼“å­˜ã€‚</li></ul><h4 id="_3-4-7-redolog-æ—¥å¿—é‡å†™" tabindex="-1"><a class="header-anchor" href="#_3-4-7-redolog-æ—¥å¿—é‡å†™"><span>3.4.7 Redolog æ—¥å¿—é‡å†™</span></a></h4><p><strong>é—®é¢˜èƒŒæ™¯ï¼š</strong> redolog æ–‡ä»¶å†™æ»¡äº†/æ–‡ä»¶è¿‡å¤§æ€ä¹ˆåŠï¼Ÿ</p><p><strong>è§£å†³æ–¹æ¡ˆ - æ—¥å¿—é‡å†™ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDB å­˜å‚¨å¼•æ“æœ‰ 1 ä¸ª<code>é‡åšæ—¥å¿—æ–‡ä»¶ç»„ redo log Group</code>ï¼Œç”± 2 ä¸ª <code>redolog æ–‡ä»¶</code> ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼š<code>ib_logfile0</code> å’Œ <code>ib_logfile1</code>ã€‚</p><p><strong>æ—¥å¿—é‡å†™æ–¹å¼ï¼šå¾ªç¯å†™</strong><code>é‡åšæ—¥å¿—æ–‡ä»¶ç»„</code>æ˜¯ä»¥ <code>å¾ªç¯å†™</code> çš„æ–¹å¼å·¥ä½œçš„ï¼Œä»å¤´å¼€å§‹å†™ï¼Œå†™åˆ°æœ«å°¾å°±åˆå›åˆ°å¼€å¤´ï¼Œç›¸å½“äºä¸€ä¸ªç¯å½¢ã€‚ å…ˆå†™ <code>ib_logfile0</code> æ–‡ä»¶ï¼Œå½“ <code>ib_logfile0</code> æ–‡ä»¶è¢«å†™æ»¡çš„æ—¶å€™ï¼Œä¼šåˆ‡æ¢è‡³ <code>ib_logfile1</code> æ–‡ä»¶ï¼Œå½“ <code>ib_logfile1</code> æ–‡ä»¶ä¹Ÿè¢«å†™æ»¡æ—¶ï¼Œä¼šåˆ‡æ¢å› <code>ib_logfile0</code> æ–‡ä»¶ã€‚</p><p>å›¾ç¤ºï¼š <img src="http://images.kryiea.cn/img/20240602173429.png" alt="20240602173429" loading="lazy"></p><h3 id="_3-5-binlog-é‡åšæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_3-5-binlog-é‡åšæ—¥å¿—"><span>3.5 BinLog é‡åšæ—¥å¿—</span></a></h3><h4 id="_3-5-1-binlog-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_3-5-1-binlog-çš„ä½œç”¨"><span>3.5.1 Binlog çš„ä½œç”¨</span></a></h4><ul><li>binlog æ˜¯ MySQL çš„ Server å±‚å®ç°çš„æ—¥å¿—ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ï¼Œç”¨äºå¤‡ä»½æ¢å¤ã€ä¸»ä»å¤åˆ¶ç­‰ï¼›</li><li>binlog æ–‡ä»¶æ˜¯è®°å½•äº†<code>æ‰€æœ‰æ•°æ®åº“è¡¨ç»“æ„å˜æ›´å’Œè¡¨æ•°æ®ä¿®æ”¹</code>çš„æ—¥å¿—ï¼Œ<strong>ä¸ä¼šè®°å½•æŸ¥è¯¢ç±»çš„æ“ä½œ</strong>ï¼Œæ¯”å¦‚ <code>SELECT</code> å’Œ <code>SHOW</code> æ“ä½œã€‚</li><li>binlog æ˜¯è¿½åŠ å†™ï¼Œå†™æ»¡ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç»§ç»­å†™ï¼Œ<strong>ä¸ä¼šè¦†ç›–</strong>ä»¥å‰çš„æ—¥å¿—ï¼Œä¿å­˜çš„æ˜¯å…¨é‡çš„æ—¥å¿—ã€‚</li></ul><p><strong>äº§ç”Ÿ binlog çš„åœºæ™¯ï¼š</strong> MySQL åœ¨å®Œæˆä¸€æ¡æ›´æ–°æ“ä½œåï¼ŒServer å±‚ä¼šç”Ÿæˆä¸€æ¡ <code>binlog</code>ï¼Œå°†å…¶å†™åˆ° <code>binlog cache</code>ï¼ˆServer å±‚çš„ cacheï¼‰ï¼Œç­‰ä¹‹å<strong>äº‹åŠ¡æäº¤çš„æ—¶å€™</strong>ï¼Œä¼šå°†è¯¥äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ‰€æœ‰ <code>binlog</code> ç»Ÿä¸€å†™å…¥ <code>binlog æ–‡ä»¶</code>ã€‚</p><h4 id="_3-5-2-binlog-åˆ·ç›˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_3-5-2-binlog-åˆ·ç›˜ç­–ç•¥"><span>3.5.2 Binlog åˆ·ç›˜ç­–ç•¥</span></a></h4><p><strong>MySQL ç»™æ¯ä¸€ä¸ªå¤„ç†çº¿ç¨‹åˆ†é…äº†ä¸€ç‰‡å†…å­˜ç”¨äºç¼“å†² binlogï¼Œè¯¥å†…å­˜å« <code>binlog cache</code>ã€‚</strong></p><p>äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆæŠŠæ—¥å¿—å†™åˆ° <code>binlog cache</code>ï¼Œäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå†æŠŠ <code>binlog cache</code> å†™åˆ° <code>binlog æ–‡ä»¶</code>ä¸­ã€‚</p><p><strong>å…³é”®ç‚¹1ï¼š</strong> ä¸€ä¸ªäº‹åŠ¡çš„ <code>binlog</code> æ˜¯ä¸èƒ½è¢«æ‹†å¼€çš„ï¼Œå› æ­¤æ— è®ºè¿™ä¸ªäº‹åŠ¡æœ‰å¤šå¤§ï¼ˆæ¯”å¦‚æœ‰å¾ˆå¤šæ¡è¯­å¥ï¼‰ï¼Œä¹Ÿè¦ä¿è¯ä¸€æ¬¡æ€§å†™å…¥ã€‚</p><p>MySQL è®¾å®šä¸€ä¸ªå¤„ç†çº¿ç¨‹åªèƒ½åŒæ—¶æœ‰ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œï¼Œæ‰€ä»¥æ¯å½“æ‰§è¡Œä¸€ä¸ª <code>begin/start transaction</code> çš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤æäº¤ä¸Šä¸€ä¸ªäº‹åŠ¡ã€‚</p><p><strong>å…³é”®ç‚¹2ï¼š</strong> åœºæ™¯ï¼šä»€ä¹ˆæ—¶å€™ <code>binlog cache</code> ä¼šå†™åˆ° <code>binlog æ–‡ä»¶</code>ï¼Ÿ</p><p>å›ç­”ï¼šåœ¨<strong>äº‹åŠ¡æäº¤çš„æ—¶å€™</strong>ï¼Œæ‰§è¡Œå™¨æŠŠ <code>binlog cache</code> é‡Œçš„å®Œæ•´äº‹åŠ¡å†™å…¥åˆ° <code>binlog æ–‡ä»¶</code>ä¸­ï¼Œå¹¶<strong>æ¸…ç©º</strong> <code>binlog cache</code>ã€‚</p><p><strong>å…³é”®ç‚¹3ï¼š</strong> æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„<code>binlog cache</code>ï¼Œæœ€ç»ˆå†™å…¥<strong>åŒä¸€ä¸ª</strong><code>Binlogæ–‡ä»¶</code></p><p><strong>å…³é”®ç‚¹4ï¼š</strong> åœºæ™¯ï¼šå¦‚<code>å…³é”®ç‚¹3</code>æ‰€æåˆ°çš„ æœ€ç»ˆå†™å…¥åŒä¸€ä¸ª<code>Binlogæ–‡ä»¶</code>ï¼Œé‚£è¿™é‡Œçš„å¹¶å‘é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ</p><p>å›ç­”ï¼šMySQLé‡‡ç”¨äº†å¤šç§æœºåˆ¶æ¥ç¡®ä¿å¹¶å‘å®‰å…¨å’Œä¸€è‡´æ€§</p><ol><li>é”æœºåˆ¶</li><li>é¡ºåºå†™å…¥</li><li>ç»„æäº¤ Group Commit</li></ol><p><strong>å…³é”®ç‚¹5ï¼š</strong> åœºæ™¯ï¼šå†™å…¥binlogæ–‡ä»¶çš„è¿‡ç¨‹è¿˜å¯ä»¥ç»§ç»­æ‹†åˆ†ã€‚</p><ul><li>ç³»ç»Ÿè°ƒç”¨ <code>write()</code>åï¼Œä¼šå…ˆå†™å…¥å†…æ ¸çš„ç¼“å†²åŒº <code>page cache</code>ï¼Œè¿™é‡Œä¸æ¶‰åŠç£ç›˜<code>I/O</code></li><li>å†…æ ¸å†é€šè¿‡ <code>fsync()</code> æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™é‡Œæ¶‰åŠç£ç›˜<code>I/O</code>ã€‚é¢‘ç¹çš„ <code>fsync()</code> ä¼šå¯¼è‡´ç£ç›˜çš„<code>I/O</code> å‡é«˜ã€‚</li></ul><figure><img src="http://images.kryiea.cn/img/20240603001559.png" alt="20240603001559" tabindex="0" loading="lazy"><figcaption>20240603001559</figcaption></figure><p><strong>å…³é”®ç‚¹6ï¼š</strong><code>fsync()</code> çš„é¢‘ç‡ç”±å‚æ•° <code>sync_binlog</code> æ§åˆ¶</p><ul><li><code>sync_binlog = 0</code> æ˜¯é»˜è®¤å€¼ è¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½åª <code>write</code>ï¼Œä¸ <code>fsync</code>ï¼Œåç»­äº¤ç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</li><li><code>sync_binlog = 1</code> è¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½ä¼š <code>write</code>ï¼Œç„¶åé©¬ä¸Šæ‰§è¡Œ <code>fsync</code>ï¼Œæœ€å¤šä¸¢å¤±ä¸€ä¸ªäº‹åŠ¡çš„ <code>binlog</code>ã€‚</li><li><code>sync_binlog &gt; 1</code> è¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½ <code>write</code>ï¼Œä½†ç´¯ç§¯ <code>N</code> ä¸ªäº‹åŠ¡åæ‰ <code>fsync</code>ã€‚</li></ul><h4 id="_3-5-3-binlog-ä¸»ä»åŒæ­¥æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_3-5-3-binlog-ä¸»ä»åŒæ­¥æ¨¡å‹"><span>3.5.3 Binlog - ä¸»ä»åŒæ­¥æ¨¡å‹</span></a></h4><p><strong>ä¸»ä»åŒæ­¥è¿‡ç¨‹ï¼š</strong></p><ol><li><strong>å†™å…¥ binlogï¼š</strong> ä¸»åº“ä¿®æ”¹æ•°æ®åï¼Œå†™å…¥ <code>binlog æ—¥å¿—</code>ï¼Œæäº¤äº‹åŠ¡ï¼Œæ›´æ–°æœ¬åœ°å­˜å‚¨çš„æ•°æ®ã€‚</li><li><strong>åŒæ­¥ binlogï¼š</strong> ä»åº“è¿æ¥åˆ°ä¸»åº“åï¼Œä¸»åº“ä¼šåˆ›å»ºä¸€ä¸ª <code>dump çº¿ç¨‹</code>ï¼ŒæŠŠ <code>binlog</code> åŒæ­¥åˆ°æ‰€æœ‰ä»åº“ï¼Œæ¯ä¸ªä»åº“æŠŠ <code>binlog</code> å†™åˆ°æš‚å­˜æ—¥å¿—ä¸­ã€‚</li><li><strong>å›æ”¾ binlogï¼š</strong> ä»åº“å¯åŠ¨ä¸€ä¸ª <code>sql çº¿ç¨‹</code>å»å›æ”¾ <code>binlog</code>ï¼Œå»è¯» <code>relay log ä¸­ç»§æ—¥å¿—</code>ç„¶åå›æ”¾ <code>binlog</code> æ›´æ–°æ•°æ®ã€‚ <img src="http://images.kryiea.cn/img/20240603002541.png" alt="20240603002541" loading="lazy"></li></ol><p><strong>ä¸‰ç§ä¸»ä»åŒæ­¥æ¨¡å¼ï¼š</strong> MySQL é»˜è®¤çš„åŒæ­¥æ¨¡å¼ï¼šå¼‚æ­¥æ¨¡å¼</p><ul><li><strong>åŒæ­¥æ¨¡å¼ï¼š</strong> ä¸»åº“æäº¤äº‹åŠ¡çš„çº¿ç¨‹è¦ç­‰å¾…æ‰€æœ‰ä»åº“çš„åŒæ­¥æˆåŠŸï¼Œæ‰è¿”å›å®¢æˆ·ç«¯ç»“æœã€‚æ€§èƒ½æœ€å·®äº†ã€‚</li><li><strong>å¼‚æ­¥æ¨¡å¼ï¼š</strong> ä¸»åº“æäº¤äº‹åŠ¡çš„çº¿ç¨‹ä¸ä¼šç­‰å¾… binlog åŒæ­¥å®Œæˆå°±è¿”å›å®¢æˆ·ç«¯ç»“æœï¼Œæ€§èƒ½æœ€å¥½ï¼Œä½†æ˜¯ä¸»åº“å®•æœºï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ã€‚</li><li><strong>åŠåŒæ­¥æ¨¡å¼ï¼š</strong> æ¯”å¦‚ä¸€ä¸»äºŒä»çš„é›†ç¾¤ï¼Œåªè¦æˆåŠŸåŒæ­¥åˆ°ä¸€ä¸ªä»åº“ï¼Œå°±ç«‹å³è¿”å›æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚å³ä½¿ä¸»åº“å®•æœºï¼Œä»æœ‰ä¸€ä¸ªä»åº“æœ‰æœ€æ–°æ•°æ®ã€‚</li></ul><h3 id="_3-6-ä¸¤é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_3-6-ä¸¤é˜¶æ®µæäº¤"><span>3.6 ä¸¤é˜¶æ®µæäº¤</span></a></h3><h4 id="_3-6-1-ä¸¤é˜¶æ®µæäº¤çš„æå‡º" tabindex="-1"><a class="header-anchor" href="#_3-6-1-ä¸¤é˜¶æ®µæäº¤çš„æå‡º"><span>3.6.1 ä¸¤é˜¶æ®µæäº¤çš„æå‡º</span></a></h4><p><strong>æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š</strong> äº‹åŠ¡æäº¤åï¼Œ<code>redo log</code> å’Œ <code>binlog</code> éƒ½è¦æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ˜¯ç‹¬ç«‹çš„é€»è¾‘ï¼Œå¯èƒ½å‡ºç°åŠæˆåŠŸçš„çŠ¶æ€ï¼Œè¿™æ ·å°±é€ æˆä¸¤ä»½æ—¥å¿—ä¹‹é—´çš„é€»è¾‘ä¸ä¸€è‡´ã€‚</p><p><strong>é—®é¢˜çš„åœºæ™¯å¤ç°ï¼š</strong></p><p>åŸæ•°æ®ï¼šè¡¨å <code>t_user</code>ï¼ŒæŸè¡Œè®°å½• <code>id = 1ï¼›name = jay</code> æ‰§è¡ŒSQLï¼š<code>UPDATE t_user SET name = &#39;kryiea&#39; WHERE id = 1</code> äº‹åŠ¡æäº¤åï¼šè¿›è¡ŒæŒä¹…åŒ– <code>redolog</code>å’Œ <code>binlog</code>ã€‚</p><p>è¿™ä¸¤ä¸ªæ—¥å¿—çš„åˆ·ç›˜<strong>å…ˆåé¡ºåº</strong>å¯èƒ½ä¼šå¯¼è‡´ä¸‹é¢ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¦‚æœåœ¨å°† <code>redo log</code> åˆ·å…¥åˆ°ç£ç›˜ä¹‹åï¼Œ MySQL çªç„¶å®•æœºäº†ï¼Œè€Œ <code>binlog</code> è¿˜æ²¡æœ‰æ¥å¾—åŠå†™å…¥ã€‚ <ul><li>MySQL é‡å¯åï¼Œé€šè¿‡ <code>redo log</code> èƒ½å°† <code>Buffer Pool</code> ä¸­ <code>id = 1</code> è¿™è¡Œæ•°æ®çš„ <code>name</code> å­—æ®µæ¢å¤åˆ°æ–°å€¼ <code>kryiea</code>ã€‚</li><li>ä½†æ˜¯ <code>binlog</code> é‡Œé¢æ²¡æœ‰è®°å½•è¿™æ¡æ›´æ–°è¯­å¥ï¼Œåœ¨ä¸»ä»æ¶æ„ä¸­ï¼Œ<code>binlog</code> ä¼šè¢«å¤åˆ¶åˆ°ä»åº“ï¼Œç”±äº <code>binlog</code> ä¸¢å¤±äº†è¿™æ¡æ›´æ–°è¯­å¥ï¼Œä»åº“çš„è¿™ä¸€è¡Œ <code>name</code> å­—æ®µæ˜¯æ—§å€¼ <code>jay</code>ï¼Œä¸ä¸»åº“çš„å€¼ä¸ä¸€è‡´ã€‚</li></ul></li><li>å¦‚æœåœ¨å°† <code>binlog</code> åˆ·å…¥åˆ°ç£ç›˜ä¹‹åï¼Œ MySQL çªç„¶å®•æœºäº†ï¼Œè€Œ <code>redo log</code> è¿˜æ²¡æœ‰æ¥å¾—åŠå†™å…¥ ã€‚ <ul><li>ç”±äº <code>redo log</code> è¿˜æ²¡å†™ï¼Œå´©æºƒæ¢å¤ä»¥åè¿™ä¸ªäº‹åŠ¡æ— æ•ˆï¼Œæ‰€ä»¥ <code>id = 1</code> è¿™è¡Œæ•°æ®çš„ <code>name</code> å­—æ®µè¿˜æ˜¯æ—§å€¼ <code>jay</code>ã€‚</li><li>è€Œ <code>binlog</code> é‡Œé¢è®°å½•äº†è¿™æ¡æ›´æ–°è¯­å¥ï¼Œåœ¨ä¸»ä»æ¶æ„ä¸­ï¼Œ<code>binlog</code> ä¼šè¢«å¤åˆ¶åˆ°ä»åº“ï¼Œä»åº“æ‰§è¡Œäº†è¿™æ¡æ›´æ–°è¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œ <code>name</code> å­—æ®µæ˜¯æ–°å€¼ <code>kryiea</code>ï¼Œä¸ä¸»åº“çš„å€¼ä¸ä¸€è‡´ã€‚</li></ul></li></ul><p><strong>é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼š</strong> ä¸¤é˜¶æ®µæäº¤</p><h4 id="_3-6-2-ä¸¤é˜¶æ®µæäº¤çš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_3-6-2-ä¸¤é˜¶æ®µæäº¤çš„æ¦‚å¿µ"><span>3.6.2 ä¸¤é˜¶æ®µæäº¤çš„æ¦‚å¿µ</span></a></h4><p>ä¸¤é˜¶æ®µæäº¤å…¶å®æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ä¸€è‡´æ€§åè®®ï¼Œå®ƒå¯ä»¥ä¿è¯å¤šä¸ªé€»è¾‘æ“ä½œè¦ä¸å…¨éƒ¨æˆåŠŸï¼Œè¦ä¸å…¨éƒ¨å¤±è´¥ï¼Œä¸ä¼šå‡ºç°åŠæˆåŠŸçš„çŠ¶æ€ã€‚</p><p>ä¸¤é˜¶æ®µæäº¤æŠŠ<strong>å•ä¸ªäº‹åŠ¡</strong>çš„æäº¤æ‹†åˆ†æˆäº† 2 ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯<code>å‡†å¤‡ï¼ˆPrepareï¼‰é˜¶æ®µ</code>å’Œ<code>æäº¤ï¼ˆCommitï¼‰é˜¶æ®µ</code> ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½ç”±<code>åè°ƒè€…ï¼ˆCoordinatorï¼‰</code>å’Œ<code>å‚ä¸è€…ï¼ˆParticipantï¼‰</code>å…±åŒå®Œæˆã€‚</p><p><strong>åè°ƒè€…ä¸å‚ä¸è€…ä¹‹é—´çš„åä½œï¼š</strong> ä¾‹å­æ¥è‡ªå°æ—å›¾è§£ã€‚</p><p>ä¸¾ä¸ªæ‹³å‡»æ¯”èµ›çš„ä¾‹å­ï¼Œä¸¤ä½æ‹³å‡»æ‰‹ï¼ˆå‚ä¸è€…ï¼‰å¼€å§‹æ¯”èµ›ä¹‹å‰ï¼Œè£åˆ¤ï¼ˆåè°ƒè€…ï¼‰ä¼šåœ¨ä¸­é—´ç¡®è®¤ä¸¤ä½æ‹³å‡»æ‰‹çš„çŠ¶æ€ï¼Œç±»ä¼¼äºé—®ä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ</p><ul><li><strong>å‡†å¤‡é˜¶æ®µ ï¼š</strong> è£åˆ¤ï¼ˆåè°ƒè€…ï¼‰ä¼šä¾æ¬¡è¯¢é—®ä¸¤ä½æ‹³å‡»æ‰‹ï¼ˆå‚ä¸è€…ï¼‰æ˜¯å¦å‡†å¤‡å¥½äº†ï¼Œç„¶åæ‹³å‡»æ‰‹å¬åˆ°ååšå‡ºåº”ç­”ï¼Œå¦‚æœè§‰å¾—è‡ªå·±å‡†å¤‡å¥½äº†ï¼Œå°±ä¼šè·Ÿè£åˆ¤è¯´å‡†å¤‡å¥½äº†ï¼›å¦‚æœæ²¡æœ‰è‡ªå·±è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼ˆæ¯”å¦‚æ‹³å¥—è¿˜æ²¡æœ‰å¸¦å¥½ï¼‰ï¼Œå°±ä¼šè·Ÿè£åˆ¤è¯´è¿˜æ²¡å‡†å¤‡å¥½ã€‚</li><li><strong>æäº¤é˜¶æ®µ ï¼š</strong> å¦‚æœä¸¤ä½æ‹³å‡»æ‰‹ï¼ˆå‚ä¸è€…ï¼‰éƒ½å›ç­”å‡†å¤‡å¥½äº†ï¼Œè£åˆ¤ï¼ˆåè°ƒè€…ï¼‰å®£å¸ƒæ¯”èµ›æ­£å¼å¼€å§‹ï¼Œä¸¤ä½æ‹³å‡»æ‰‹å°±å¯ä»¥ç›´æ¥å¼€æ‰“ï¼›å¦‚æœä»»ä½•ä¸€ä½æ‹³å‡»æ‰‹ï¼ˆå‚ä¸è€…ï¼‰å›ç­”æ²¡æœ‰å‡†å¤‡å¥½ï¼Œè£åˆ¤ï¼ˆåè°ƒè€…ï¼‰ä¼šå®£å¸ƒæ¯”èµ›æš‚åœï¼Œå¯¹åº”äº‹åŠ¡ä¸­çš„å›æ»šæ“ä½œã€‚</li></ul><h4 id="_3-6-3-ä¸¤é˜¶æ®µæäº¤çš„è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-6-3-ä¸¤é˜¶æ®µæäº¤çš„è¿‡ç¨‹"><span>3.6.3 ä¸¤é˜¶æ®µæäº¤çš„è¿‡ç¨‹</span></a></h4><p>åœ¨ MySQL çš„ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œå¼€å¯ <code>binlog</code> çš„æƒ…å†µä¸‹ï¼ŒMySQL ä¼šåŒæ—¶ç»´æŠ¤ <code>binlog</code>ä¸ <code>redolog</code>ï¼Œä¸ºäº†ä¿è¯è¿™ä¸¤ä¸ªæ—¥å¿—çš„ä¸€è‡´æ€§ï¼ŒMySQL äº‹åŠ¡æäº¤æ—¶ä½¿ç”¨ <code>å†…éƒ¨ XA äº‹åŠ¡</code> æ¥ä¿è¯ä¸€è‡´æ€§ã€‚</p><p><code>å†…éƒ¨ XA äº‹åŠ¡</code>ç”± <code>binlog ä½œä¸ºåè°ƒè€…</code>ï¼Œ<code>å­˜å‚¨å¼•æ“æ˜¯å‚ä¸è€…</code>ã€‚</p><p>ï¼ˆæ˜¯çš„ï¼Œä¹Ÿæœ‰å¤–éƒ¨ XA äº‹åŠ¡ï¼‰</p><p>å½“å®¢æˆ·ç«¯æ‰§è¡Œ <code>commit</code> è¯­å¥æˆ–è€…åœ¨<code>è‡ªåŠ¨æäº¤</code>çš„æƒ…å†µä¸‹ï¼ŒMySQL å†…éƒ¨å¼€å¯ä¸€ä¸ª<code> XA äº‹åŠ¡</code>ï¼Œ åˆ†ä¸¤é˜¶æ®µæ¥å®Œæˆ <code>XA äº‹åŠ¡</code>çš„æäº¤ ã€‚</p><p><strong>åœºæ™¯ä¸¾ä¾‹ï¼š</strong> äº‹åŠ¡çš„æäº¤è¿‡ç¨‹æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šå°† <code>redolog</code> çš„å†™å…¥æ‹†æˆäº†ä¸¤ä¸ªæ­¥éª¤ <code>prepare</code> å’Œ <code>commit</code>ï¼Œä¸­é—´å†<strong>ç©¿æ’</strong>å†™å…¥ <code>binlog</code>ã€‚</p><p><strong>å…·ä½“å¦‚ä¸‹ï¼š</strong></p><ul><li><p><code>prepare é˜¶æ®µ</code> ï¼šå°† <code>XIDï¼ˆå†…éƒ¨ XA äº‹åŠ¡çš„ IDï¼‰</code> å†™å…¥åˆ° <code>redo log</code>ï¼ŒåŒæ—¶å°† <code>redo log</code> å¯¹åº”çš„äº‹åŠ¡çŠ¶æ€è®¾ç½®ä¸º <code>prepare</code>ï¼Œç„¶åå°† <code>redo log</code> æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ˆ<code>innodb_flush_log_at_trx_commit = 1</code> çš„ä½œç”¨ï¼‰</p></li><li><p><code>commit é˜¶æ®µ</code> ï¼šæŠŠ <code>XID</code> å†™å…¥åˆ° <code>binlog</code>ï¼Œç„¶åå°† <code>binlog</code> æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ˆ<code>sync_binlog = 1</code> çš„ä½œç”¨ï¼‰ï¼Œæ¥ç€è°ƒç”¨å¼•æ“çš„æäº¤äº‹åŠ¡æ¥å£ï¼Œå°† <code>redo log</code> çŠ¶æ€è®¾ç½®ä¸º <code>commit</code>ï¼Œæ­¤æ—¶è¯¥çŠ¶æ€å¹¶ä¸éœ€è¦æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œåªéœ€è¦ <code>write</code> åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ <code>page cache</code> ä¸­å°±å¤Ÿäº†ã€‚å› ä¸ºåªè¦ <code>binlog</code> å†™ç£ç›˜æˆåŠŸï¼Œå°±ç®— <code>redo log</code> çš„çŠ¶æ€è¿˜æ˜¯ <code>prepare</code> ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¸€æ ·ä¼šè¢«è®¤ä¸º<strong>äº‹åŠ¡å·²ç»æ‰§è¡ŒæˆåŠŸ</strong>ï¼›</p></li></ul><figure><img src="http://images.kryiea.cn/img/20240603005031.png" alt="20240603005031" tabindex="0" loading="lazy"><figcaption>20240603005031</figcaption></figure><h4 id="_3-6-4-ä¸¤é˜¶æ®µæäº¤æœ‰ä»€ä¹ˆé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-6-4-ä¸¤é˜¶æ®µæäº¤æœ‰ä»€ä¹ˆé—®é¢˜"><span>3.6.4 ä¸¤é˜¶æ®µæäº¤æœ‰ä»€ä¹ˆé—®é¢˜</span></a></h4><p>ä¸¤é˜¶æ®µæäº¤è™½ç„¶ä¿è¯äº†ä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶çš„æ•°æ®ä¸€è‡´æ€§ï¼Œä½†æ˜¯æ€§èƒ½å¾ˆå·®ã€‚</p><p><strong>ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢çš„å½±å“ï¼š</strong></p><ul><li><strong>ç£ç›˜ I/O æ¬¡æ•°é«˜ ï¼š</strong> å¯¹äº&quot;åŒ1&quot;é…ç½®ï¼Œæ¯ä¸ªäº‹åŠ¡æäº¤éƒ½ä¼šè¿›è¡Œä¸¤æ¬¡ <code>fsync</code>ï¼ˆåˆ·ç›˜ï¼‰ï¼Œä¸€æ¬¡æ˜¯ <code>redo log åˆ·ç›˜</code>ï¼Œå¦ä¸€æ¬¡æ˜¯ <code>binlog åˆ·ç›˜</code>ã€‚</li><li><strong>é”ç«äº‰æ¿€çƒˆ ï¼š</strong> ä¸¤é˜¶æ®µæäº¤è™½ç„¶èƒ½å¤Ÿä¿è¯<code>å•äº‹åŠ¡</code>ä¸¤ä¸ªæ—¥å¿—çš„å†…å®¹ä¸€è‡´ï¼Œä½†åœ¨<code>å¤šäº‹åŠ¡</code>çš„æƒ…å†µä¸‹ï¼Œå´<strong>ä¸èƒ½ä¿è¯ä¸¤è€…çš„æäº¤é¡ºåºä¸€è‡´</strong>ï¼Œå› æ­¤ï¼Œåœ¨ä¸¤é˜¶æ®µæäº¤çš„æµç¨‹åŸºç¡€ä¸Šï¼Œè¿˜éœ€è¦åŠ ä¸€ä¸ª<code>é”</code>æ¥ä¿è¯æäº¤çš„åŸå­æ€§ï¼Œä»è€Œä¿è¯å¤šäº‹åŠ¡çš„æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªæ—¥å¿—çš„æäº¤é¡ºåºä¸€è‡´ã€‚</li></ul><h4 id="_3-6-5-å¯¹ä¸¤é˜¶æ®µæäº¤åŠ å¼º-åŠ å…¥ç»„æäº¤" tabindex="-1"><a class="header-anchor" href="#_3-6-5-å¯¹ä¸¤é˜¶æ®µæäº¤åŠ å¼º-åŠ å…¥ç»„æäº¤"><span>3.6.5 å¯¹ä¸¤é˜¶æ®µæäº¤åŠ å¼ºï¼šåŠ å…¥ç»„æäº¤</span></a></h4><p>MySQL å¼•å…¥äº†<code>ç»„æäº¤ï¼ˆgroup commitï¼‰</code>æœºåˆ¶ï¼Œå½“æœ‰<strong>å¤šä¸ªäº‹åŠ¡æäº¤</strong>çš„æ—¶å€™ï¼Œä¼šå°†å¤šä¸ª <code>binlog</code> åˆ·ç›˜æ“ä½œåˆå¹¶æˆ<code>1</code>ä¸ªï¼Œä»è€Œå‡å°‘ç£ç›˜ <code>I/O</code> çš„æ¬¡æ•°ã€‚</p><p>å¼•å…¥äº†ç»„æäº¤æœºåˆ¶åï¼Œ<code>prepare é˜¶æ®µ</code>ä¸å˜ï¼Œåªé’ˆå¯¹ <code>commit é˜¶æ®µ</code>ï¼Œå°† <code>commit é˜¶æ®µ</code>æ‹†åˆ†ä¸º<code>3</code>ä¸ªè¿‡ç¨‹ï¼š â— <strong>flush é˜¶æ®µ ï¼š</strong> å¤šä¸ªäº‹åŠ¡<strong>æŒ‰è¿›å…¥çš„é¡ºåº</strong>å°† <code>binlog</code> ä» <code>cache</code> å†™å…¥æ–‡ä»¶ï¼ˆä¸åˆ·ç›˜ï¼‰ï¼› â— <strong>sync é˜¶æ®µ ï¼š</strong> å¯¹ <code>binlog</code> æ–‡ä»¶åš <code>fsync</code> æ“ä½œï¼ˆå¤šä¸ªäº‹åŠ¡çš„ <code>binlog</code> åˆå¹¶ä¸€æ¬¡åˆ·ç›˜ï¼‰ï¼› â— <strong>commit é˜¶æ®µ ï¼š</strong> å„ä¸ªäº‹åŠ¡<strong>æŒ‰é¡ºåº</strong>åš <code>InnoDB commit æ“ä½œ</code>ï¼›</p><figure><img src="http://images.kryiea.cn/img/20240603010701.png" alt="20240603010701" tabindex="0" loading="lazy"><figcaption>20240603010701</figcaption></figure></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/3/31 15:53:39</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1582877056@qq.com">kryiea</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">Copyright Â© 2025 kryiea </div></footer></div><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DRR9Yo7Y.js" defer></script>
  </body>
</html>
